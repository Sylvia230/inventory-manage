import{g as W,m as K,f as A,h as f,i as q,k as R,r as b,l as X,d as Y,u as J,F as j,j as e,C as w,I as Q,e as U,B as Z,T as D,s as C}from"./index-D2rM6ovj.js";import{D as $}from"./index-ef3aGcNG.js";import{I as E}from"./index-Bt_JzNTm.js";import{T as M}from"./index-VfPI4BCv.js";import{F as ee}from"./Table-B7m-L3lW.js";import"./index-Bqt44OL4.js";import"./styleChecker-CcZ-Kr6E.js";const te=i=>{const{componentCls:r}=i;return{[r]:{"&-horizontal":{[`&${r}`]:{"&-sm":{marginBlock:i.marginXS},"&-md":{marginBlock:i.margin}}}}}},ie=i=>{const{componentCls:r,sizePaddingEdgeHorizontal:d,colorSplit:n,lineWidth:a,textPaddingInline:y,orientationMargin:m,verticalMarginInline:g}=i;return{[r]:Object.assign(Object.assign({},A(i)),{borderBlockStart:`${f(a)} solid ${n}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:g,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${f(a)} solid ${n}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${f(i.marginLG)} 0`},[`&-horizontal${r}-with-text`]:{display:"flex",alignItems:"center",margin:`${f(i.dividerHorizontalWithTextGutterMargin)} 0`,color:i.colorTextHeading,fontWeight:500,fontSize:i.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${n}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${f(a)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${r}-with-text-start`]:{"&::before":{width:`calc(${m} * 100%)`},"&::after":{width:`calc(100% - ${m} * 100%)`}},[`&-horizontal${r}-with-text-end`]:{"&::before":{width:`calc(100% - ${m} * 100%)`},"&::after":{width:`calc(${m} * 100%)`}},[`${r}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:y},"&-dashed":{background:"none",borderColor:n,borderStyle:"dashed",borderWidth:`${f(a)} 0 0`},[`&-horizontal${r}-with-text${r}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${r}-dashed`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:n,borderStyle:"dotted",borderWidth:`${f(a)} 0 0`},[`&-horizontal${r}-with-text${r}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${r}-dotted`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${r}-with-text`]:{color:i.colorText,fontWeight:"normal",fontSize:i.fontSize},[`&-horizontal${r}-with-text-start${r}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${r}-inner-text`]:{paddingInlineStart:d}},[`&-horizontal${r}-with-text-end${r}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${r}-inner-text`]:{paddingInlineEnd:d}}})}},re=i=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:i.marginXS}),ne=W("Divider",i=>{const r=K(i,{dividerHorizontalWithTextGutterMargin:i.margin,sizePaddingEdgeHorizontal:0});return[ie(r),te(r)]},re,{unitless:{orientationMargin:!0}});var oe=function(i,r){var d={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&r.indexOf(n)<0&&(d[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(i);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(i,n[a])&&(d[n[a]]=i[n[a]]);return d};const ae={small:"sm",middle:"md"},se=i=>{const{getPrefixCls:r,direction:d,className:n,style:a}=q("divider"),{prefixCls:y,type:m="horizontal",orientation:g="center",orientationMargin:h,className:S,rootClassName:P,children:v,dashed:t,variant:o="solid",plain:l,style:u,size:x}=i,c=oe(i,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),s=r("divider",y),[O,G,V]=ne(s),F=R(x),z=ae[F],k=!!v,I=b.useMemo(()=>g==="left"?d==="rtl"?"end":"start":g==="right"?d==="rtl"?"start":"end":g,[d,g]),N=I==="start"&&h!=null,B=I==="end"&&h!=null,H=X(s,n,G,V,`${s}-${m}`,{[`${s}-with-text`]:k,[`${s}-with-text-${I}`]:k,[`${s}-dashed`]:!!t,[`${s}-${o}`]:o!=="solid",[`${s}-plain`]:!!l,[`${s}-rtl`]:d==="rtl",[`${s}-no-default-orientation-margin-start`]:N,[`${s}-no-default-orientation-margin-end`]:B,[`${s}-${z}`]:!!z},S,P),_=b.useMemo(()=>typeof h=="number"?h:/^\d+$/.test(h)?Number(h):h,[h]),L={marginInlineStart:N?_:void 0,marginInlineEnd:B?_:void 0};return O(b.createElement("div",Object.assign({className:H,style:Object.assign(Object.assign({},a),u)},c,{role:"separator"}),v&&m!=="vertical"&&b.createElement("span",{className:`${s}-inner-text`,style:L},v)))},le="_priceCheckDetail_1j8rp_1",de="_modelSection_1j8rp_4",ce="_modelHeader_1j8rp_7",me="_modelPrice_1j8rp_18",he="_photoGrid_1j8rp_23",pe="_photoItem_1j8rp_29",ge="_photoDescription_1j8rp_35",p={priceCheckDetail:le,modelSection:de,modelHeader:ce,modelPrice:me,photoGrid:he,photoItem:pe,photoDescription:ge},{TabPane:T}=D,$e=()=>{const{id:i}=Y(),r=J(),[d]=j.useForm(),[n,a]=b.useState(null),[y,m]=b.useState(!1);b.useEffect(()=>{i&&(async()=>{m(!0);try{a({id:i||"",brand:"Toyota",series:"Camry",year:2020,status:"待核价",models:[{id:"1",name:"2.5L 豪华版",guidePrice:2e5,vehicles:[{id:"v1",vin:"LVGBE40K8GP123456",licensePlate:"粤B12345",mileage:5e4,color:"白色"},{id:"v2",vin:"LVGBE40K8GP123457",licensePlate:"粤B12346",mileage:45e3,color:"黑色"}]},{id:"2",name:"2.5L 运动版",guidePrice:22e4,vehicles:[{id:"v3",vin:"LVGBE40K8GP123458",licensePlate:"粤B12347",mileage:3e4,color:"红色"}]}]})}catch{C.error("获取车辆信息失败")}finally{m(!1)}})()},[i]);const g=async t=>{try{console.log("提交核价结果:",t),C.success("核价结果提交成功"),r("/task-center/price-check")}catch{C.error("提交失败，请重试")}},h=(t,o)=>{if(!o||!n)return;const l=n.models.find(s=>s.id===t);if(!l)return;const u=typeof o=="string"?parseFloat(o):o;if(isNaN(u))return;const x=Math.floor(u/l.vehicles.length),c={...d.getFieldsValue()};c.models||(c.models={}),c.models[t]||(c.models[t]={}),c.models[t].vehicles||(c.models[t].vehicles={}),l.vehicles.forEach(s=>{c.models[t].vehicles[s.id]={...c.models[t].vehicles[s.id],actualPrice:x}}),d.setFieldsValue(c)},S=[{id:1,url:"https://example.com/photo1.jpg",description:"前脸照片"},{id:2,url:"https://example.com/photo2.jpg",description:"侧面照片"},{id:3,url:"https://example.com/photo3.jpg",description:"后部照片"},{id:4,url:"https://example.com/photo4.jpg",description:"内饰照片"}],P=[{id:1,url:"https://example.com/doc1.jpg",description:"行驶证正面"},{id:2,url:"https://example.com/doc2.jpg",description:"行驶证背面"},{id:3,url:"https://example.com/doc3.jpg",description:"车辆登记证"}],v=t=>{const o=[{title:"车架号",dataIndex:"vin",key:"vin"},{title:"车牌号",dataIndex:"licensePlate",key:"licensePlate"},{title:"里程数",dataIndex:"mileage",key:"mileage",render:l=>`${l.toLocaleString()}公里`},{title:"颜色",dataIndex:"color",key:"color"},{title:"实际价格",dataIndex:"actualPrice",key:"actualPrice",render:(l,u)=>e.jsx(j.Item,{name:["models",t.id,"vehicles",u.id,"actualPrice"],rules:[{required:!0,message:"请输入实际价格"}],noStyle:!0,children:e.jsx(M,{style:{width:"100%"},formatter:x=>`${x}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:x=>x.replace(/\¥\s?|(,*)/g,"")})})}];return e.jsxs("div",{className:p.modelSection,children:[e.jsxs("div",{className:p.modelHeader,children:[e.jsx("h3",{children:t.name}),e.jsx("div",{className:p.modelPrice,children:e.jsx(j.Item,{name:["models",t.id,"totalPrice"],label:"总核价",style:{marginLeft:24,marginBottom:0},children:e.jsx(M,{style:{width:200},formatter:l=>`${l}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:l=>l.replace(/\¥\s?|(,*)/g,""),onChange:l=>h(t.id,l)})})})]}),e.jsx(ee,{columns:o,dataSource:t.vehicles,rowKey:"id",pagination:!1,size:"middle"})]},t.id)};return e.jsxs("div",{className:p.priceCheckDetail,children:[e.jsx(w,{style:{marginTop:24},children:e.jsxs(j,{form:d,layout:"vertical",onFinish:g,initialValues:{orderId:i,models:n==null?void 0:n.models.reduce((t,o)=>({...t,[o.id]:{totalPrice:o.guidePrice*o.vehicles.length,vehicles:o.vehicles.reduce((l,u)=>({...l,[u.id]:{actualPrice:Math.floor(o.guidePrice*.9),remarks:""}}),{})}}),{})},children:[e.jsx(j.Item,{name:"orderId",label:"订单编号",rules:[{required:!0}],children:e.jsx(Q,{disabled:!0})}),n==null?void 0:n.models.map((t,o)=>e.jsxs(U.Fragment,{children:[o>0&&e.jsx(se,{}),v(t)]},t.id)),e.jsx(j.Item,{style:{marginTop:24},children:e.jsx(Z,{type:"primary",htmlType:"submit",children:"提交核价结果"})})]})}),e.jsx(w,{title:"基本信息",loading:y,children:n&&e.jsxs($,{bordered:!0,children:[e.jsx($.Item,{label:"品牌",children:n.brand}),e.jsx($.Item,{label:"车系",children:n.series}),e.jsx($.Item,{label:"年份",children:n.year})]})}),e.jsx(w,{style:{marginTop:24},children:e.jsxs(D,{defaultActiveKey:"1",children:[e.jsx(T,{tab:"验车照片",children:e.jsx("div",{className:p.photoGrid,children:S.map(t=>e.jsxs("div",{className:p.photoItem,children:[e.jsx(E,{src:t.url,alt:t.description,style:{width:"100%",height:200,objectFit:"cover"}}),e.jsx("div",{className:p.photoDescription,children:e.jsx("h4",{children:t.description})})]},t.id))})},"1"),e.jsx(T,{tab:"证件照片",children:e.jsx("div",{className:p.photoGrid,children:P.map(t=>e.jsxs("div",{className:p.photoItem,children:[e.jsx(E,{src:t.url,alt:t.description,style:{width:"100%",height:200,objectFit:"cover"}}),e.jsx("div",{className:p.photoDescription,children:e.jsx("h4",{children:t.description})})]},t.id))})},"2")]})})]})};export{$e as default};
