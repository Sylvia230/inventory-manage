var ai=Object.defineProperty;var oi=(e,n,r)=>n in e?ai(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var Ge=(e,n,r)=>oi(e,typeof n!="symbol"?n+"":n,r);import{r as y,b as Ze,j as a,M as Oe,R as q,a as P,S as Ie,B as L,s as m,c as li,u as ui,F as M,G as ci,d as fi,C as _e,I as ye}from"./index-DRPHcA5R.js";import{D as Xn,d as xe}from"./index-DSEt_ENV.js";import{a as di,b as hi,P as W,d as vi,R as _i,s as pi,u as Mn}from"./waybill-D3YTaxAU.js";import{F as Jn,R as Lt}from"./Table-CLghJ34T.js";import{D as p}from"./index-CkJG2kDK.js";import{D as gi,U as ct}from"./index-C4aFj8f-.js";import{T as kt}from"./index-D5bt7Jyd.js";import{R as Ke}from"./EyeOutlined-D0XpQMAl.js";import{R as ft}from"./PlusOutlined-CYO0dtlp.js";import{I as Rn}from"./index-BjENZz-U.js";import{S as mi}from"./index-BTE1MxX-.js";import"./styleChecker-VBj3MALj.js";var bi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Oi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M644.7 669.2a7.92 7.92 0 00-6.5-3.3H594c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.8-5.3 0-12.7-6.5-12.7h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-22.9-31.9zM688 306v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 458H208V148h560v296c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h312c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm402.6-320.8l-192-66.7c-.9-.3-1.7-.4-2.6-.4s-1.8.1-2.6.4l-192 66.7a7.96 7.96 0 00-5.4 7.5v251.1c0 2.5 1.1 4.8 3.1 6.3l192 150.2c1.4 1.1 3.2 1.7 4.9 1.7s3.5-.6 4.9-1.7l192-150.2c1.9-1.5 3.1-3.8 3.1-6.3V538.7c0-3.4-2.2-6.4-5.4-7.5zM826 763.7L688 871.6 550 763.7V577l138-48 138 48v186.7z"}}]},name:"file-protect",theme:"outlined"};function Ht(){return Ht=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},Ht.apply(this,arguments)}const ji=(e,n)=>y.createElement(Ze,Ht({},e,{ref:n,icon:yi})),Ai=y.forwardRef(ji);function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},Gt.apply(this,arguments)}const Si=(e,n)=>y.createElement(Ze,Gt({},e,{ref:n,icon:Oi})),wi=y.forwardRef(Si);function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},Kt.apply(this,arguments)}const Pi=(e,n)=>y.createElement(Ze,Kt({},e,{ref:n,icon:gi})),Bt=y.forwardRef(Pi);function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},Wt.apply(this,arguments)}const Ci=(e,n)=>y.createElement(Ze,Wt({},e,{ref:n,icon:xi})),Ei=y.forwardRef(Ci);function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},qt.apply(this,arguments)}const Di=(e,n)=>y.createElement(Ze,qt({},e,{ref:n,icon:bi})),Ti=y.forwardRef(Di),Ii="_container_hv29c_1",Mi="_header_hv29c_6",Ri="_card_hv29c_21",Ni="_loadingContainer_hv29c_40",Li="_errorContainer_hv29c_48",ki="_photoGrid_hv29c_135",Bi="_photoItem_hv29c_142",Vi="_uploadedPhoto_hv29c_206",Ui="_photoActions_hv29c_214",N={container:Ii,header:Mi,card:Ri,loadingContainer:Ni,errorContainer:Li,photoGrid:ki,photoItem:Bi,uploadedPhoto:Vi,photoActions:Ui},$i="_insuranceModal_1os2t_1",Fi="_modalContent_1os2t_10",zi="_stepContent_1os2t_17",Hi="_dateSelector_1os2t_28",Gi="_label_1os2t_35",Ki="_hint_1os2t_40",Wi="_vehicleTable_1os2t_56",qi="_infoSection_1os2t_85",Yi="_stepButtons_1os2t_115",$={insuranceModal:$i,modalContent:Fi,stepContent:zi,dateSelector:Hi,label:Gi,hint:Ki,vehicleTable:Wi,infoSection:qi,stepButtons:Yi};function S(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Xi={};function on(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Xi}var Qn=Object.assign,_t=Object.getOwnPropertyDescriptor,se=Object.defineProperty,jt=Object.prototype,Yt=[];Object.freeze(Yt);var Zn={};Object.freeze(Zn);var Ji=typeof Proxy<"u",Qi=Object.toString();function er(){Ji||S("Proxy not available")}function tr(e){var n=!1;return function(){if(!n)return n=!0,e.apply(this,arguments)}}var Me=function(){};function te(e){return typeof e=="function"}function Ae(e){var n=typeof e;switch(n){case"string":case"symbol":case"number":return!0}return!1}function At(e){return e!==null&&typeof e=="object"}function fe(e){if(!At(e))return!1;var n=Object.getPrototypeOf(e);if(n==null)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r.toString()===Qi}function nr(e){var n=e==null?void 0:e.constructor;return n?n.name==="GeneratorFunction"||n.displayName==="GeneratorFunction":!1}function St(e,n,r){se(e,n,{enumerable:!1,writable:!0,configurable:!0,value:r})}function rr(e,n,r){se(e,n,{enumerable:!1,writable:!1,configurable:!0,value:r})}function Pe(e,n){var r="isMobX"+e;return n.prototype[r]=!0,function(t){return At(t)&&t[r]===!0}}function Ve(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function Zi(e){var n=Object.getPrototypeOf(e),r=Object.getPrototypeOf(n),t=Object.getPrototypeOf(r);return t===null}function le(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var ir=typeof Object.getOwnPropertySymbols<"u";function es(e){var n=Object.keys(e);if(!ir)return n;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(n,r.filter(function(t){return jt.propertyIsEnumerable.call(e,t)})):n}var Ye=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:ir?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function sr(e){return e===null?null:typeof e=="object"?""+e:e}function ge(e,n){return jt.hasOwnProperty.call(e,n)}var ts=Object.getOwnPropertyDescriptors||function(n){var r={};return Ye(n).forEach(function(t){r[t]=_t(n,t)}),r};function F(e,n){return!!(e&n)}function z(e,n,r){return r?e|=n:e&=~n,e}function Nn(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}function ns(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,is(t.key),t)}}function Ue(e,n,r){return n&&ns(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Re(e,n){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=ss(e))||n){r&&(e=r);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},ke.apply(null,arguments)}function ar(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,Xt(e,n)}function Xt(e,n){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},Xt(e,n)}function rs(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,n);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function is(e){var n=rs(e,"string");return typeof n=="symbol"?n:n+""}function ss(e,n){if(e){if(typeof e=="string")return Nn(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nn(e,n):void 0}}var Ne=Symbol("mobx-stored-annotations");function ae(e){function n(r,t){if(tt(t))return e.decorate_20223_(r,t);et(r,t,e)}return Object.assign(n,e)}function et(e,n,r){ge(e,Ne)||St(e,Ne,ke({},e[Ne])),fs(r)||(e[Ne][n]=r)}function tt(e){return typeof e=="object"&&typeof e.kind=="string"}var _=Symbol("mobx administration"),be=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=A.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var n=e.prototype;return n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(t){return t()})},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(t){return t()})},n.reportObserved=function(){return Or(this)},n.reportChanged=function(){J(),xr(this),Q()},n.toString=function(){return this.name_},Ue(e,[{key:"isBeingObserved",get:function(){return F(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=z(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return F(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=z(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return F(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=z(this.flags_,e.diffValueMask_,t===1)}}])}();be.isBeingObservedMask_=1;be.isPendingUnobservationMask_=2;be.diffValueMask_=4;var ln=Pe("Atom",be);function or(e,n,r){n===void 0&&(n=Me),r===void 0&&(r=Me);var t=new be(e);return n!==Me&&va(t,n),r!==Me&&Pr(t,r),t}function as(e,n){return Vr(e,n)}function os(e,n){return Object.is?Object.is(e,n):e===n?e!==0||1/e===1/n:e!==e&&n!==n}var pt={structural:as,default:os};function Se(e,n,r){return Tr(e)?e:Array.isArray(e)?R.array(e,{name:r}):fe(e)?R.object(e,void 0,{name:r}):Ve(e)?R.map(e,{name:r}):le(e)?R.set(e,{name:r}):typeof e=="function"&&!Je(e)&&!Qe(e)?nr(e)?Be(e):Xe(r,e):e}function ls(e,n,r){if(e==null||Tt(e)||Dt(e)||Ee(e)||ie(e))return e;if(Array.isArray(e))return R.array(e,{name:r,deep:!1});if(fe(e))return R.object(e,void 0,{name:r,deep:!1});if(Ve(e))return R.map(e,{name:r,deep:!1});if(le(e))return R.set(e,{name:r,deep:!1})}function wt(e){return e}function us(e,n){return Vr(e,n)?n:e}var cs="override";function fs(e){return e.annotationType_===cs}function nt(e,n){return{annotationType_:e,options_:n,make_:ds,extend_:hs,decorate_20223_:vs}}function ds(e,n,r,t){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,n,r,!1)===null?0:1;if(t===e.target_)return this.extend_(e,n,r,!1)===null?0:2;if(Je(r.value))return 1;var s=lr(e,this,n,r,!1);return se(t,n,s),2}function hs(e,n,r,t){var i=lr(e,this,n,r);return e.defineProperty_(n,i,t)}function vs(e,n){var r=n.kind,t=n.name,i=n.addInitializer,s=this,o=function(d){var h,O,w,j;return we((h=(O=s.options_)==null?void 0:O.name)!=null?h:t.toString(),d,(w=(j=s.options_)==null?void 0:j.autoAction)!=null?w:!1)};if(r=="field")return function(c){var d,h=c;return Je(h)||(h=o(h)),(d=s.options_)!=null&&d.bound&&(h=h.bind(this),h.isMobxAction=!0),h};if(r=="method"){var l;return Je(e)||(e=o(e)),(l=this.options_)!=null&&l.bound&&i(function(){var c=this,d=c[t].bind(c);d.isMobxAction=!0,c[t]=d}),e}S("Cannot apply '"+s.annotationType_+"' to '"+String(t)+"' (kind: "+r+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function _s(e,n,r,t){n.annotationType_,t.value}function lr(e,n,r,t,i){var s,o,l,c,d,h,O;i===void 0&&(i=v.safeDescriptors),_s(e,n,r,t);var w=t.value;if((s=n.options_)!=null&&s.bound){var j;w=w.bind((j=e.proxy_)!=null?j:e.target_)}return{value:we((o=(l=n.options_)==null?void 0:l.name)!=null?o:r.toString(),w,(c=(d=n.options_)==null?void 0:d.autoAction)!=null?c:!1,(h=n.options_)!=null&&h.bound?(O=e.proxy_)!=null?O:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function ur(e,n){return{annotationType_:e,options_:n,make_:ps,extend_:gs,decorate_20223_:ms}}function ps(e,n,r,t){var i;if(t===e.target_)return this.extend_(e,n,r,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!ge(e.target_,n)||!Qe(e.target_[n]))&&this.extend_(e,n,r,!1)===null)return 0;if(Qe(r.value))return 1;var s=cr(e,this,n,r,!1,!1);return se(t,n,s),2}function gs(e,n,r,t){var i,s=cr(e,this,n,r,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(n,s,t)}function ms(e,n){var r,t=n.name,i=n.addInitializer;return Qe(e)||(e=Be(e)),(r=this.options_)!=null&&r.bound&&i(function(){var s=this,o=s[t].bind(s);o.isMobXFlow=!0,s[t]=o}),e}function bs(e,n,r,t){n.annotationType_,t.value}function cr(e,n,r,t,i,s){s===void 0&&(s=v.safeDescriptors),bs(e,n,r,t);var o=t.value;if(Qe(o)||(o=Be(o)),i){var l;o=o.bind((l=e.proxy_)!=null?l:e.target_),o.isMobXFlow=!0}return{value:o,configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function un(e,n){return{annotationType_:e,options_:n,make_:ys,extend_:Os,decorate_20223_:xs}}function ys(e,n,r){return this.extend_(e,n,r,!1)===null?0:1}function Os(e,n,r,t){return js(e,this,n,r),e.defineComputedProperty_(n,ke({},this.options_,{get:r.get,set:r.set}),t)}function xs(e,n){var r=this,t=n.name,i=n.addInitializer;return i(function(){var s=$e(this)[_],o=ke({},r.options_,{get:e,context:this});o.name||(o.name="ObservableObject."+t.toString()),s.values_.set(t,new ne(o))}),function(){return this[_].getObservablePropValue_(t)}}function js(e,n,r,t){n.annotationType_,t.get}function Pt(e,n){return{annotationType_:e,options_:n,make_:As,extend_:Ss,decorate_20223_:ws}}function As(e,n,r){return this.extend_(e,n,r,!1)===null?0:1}function Ss(e,n,r,t){var i,s;return Ps(e,this),e.defineObservableProperty_(n,r.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:Se,t)}function ws(e,n){var r=this,t=n.kind,i=n.name,s=new WeakSet;function o(l,c){var d,h,O=$e(l)[_],w=new je(c,(d=(h=r.options_)==null?void 0:h.enhancer)!=null?d:Se,"ObservableObject."+i.toString(),!1);O.values_.set(i,w),s.add(l)}if(t=="accessor")return{get:function(){return s.has(this)||o(this,e.get.call(this)),this[_].getObservablePropValue_(i)},set:function(c){return s.has(this)||o(this,c),this[_].setObservablePropValue_(i,c)},init:function(c){return s.has(this)||o(this,c),c}}}function Ps(e,n,r,t){n.annotationType_}var Cs="true",Es=fr();function fr(e){return{annotationType_:Cs,options_:e,make_:Ds,extend_:Ts,decorate_20223_:Is}}function Ds(e,n,r,t){var i,s;if(r.get)return Ct.make_(e,n,r,t);if(r.set){var o=we(n.toString(),r.set);return t===e.target_?e.defineProperty_(n,{configurable:v.safeDescriptors?e.isPlainObject_:!0,set:o})===null?0:2:(se(t,n,{configurable:!0,set:o}),2)}if(t!==e.target_&&typeof r.value=="function"){var l;if(nr(r.value)){var c,d=(c=this.options_)!=null&&c.autoBind?Be.bound:Be;return d.make_(e,n,r,t)}var h=(l=this.options_)!=null&&l.autoBind?Xe.bound:Xe;return h.make_(e,n,r,t)}var O=((i=this.options_)==null?void 0:i.deep)===!1?R.ref:R;if(typeof r.value=="function"&&(s=this.options_)!=null&&s.autoBind){var w;r.value=r.value.bind((w=e.proxy_)!=null?w:e.target_)}return O.make_(e,n,r,t)}function Ts(e,n,r,t){var i,s;if(r.get)return Ct.extend_(e,n,r,t);if(r.set)return e.defineProperty_(n,{configurable:v.safeDescriptors?e.isPlainObject_:!0,set:we(n.toString(),r.set)},t);if(typeof r.value=="function"&&(i=this.options_)!=null&&i.autoBind){var o;r.value=r.value.bind((o=e.proxy_)!=null?o:e.target_)}var l=((s=this.options_)==null?void 0:s.deep)===!1?R.ref:R;return l.extend_(e,n,r,t)}function Is(e,n){S("'"+this.annotationType_+"' cannot be used as a decorator")}var Ms="observable",Rs="observable.ref",Ns="observable.shallow",Ls="observable.struct",dr={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(dr);function dt(e){return e||dr}var Jt=Pt(Ms),ks=Pt(Rs,{enhancer:wt}),Bs=Pt(Ns,{enhancer:ls}),Vs=Pt(Ls,{enhancer:us}),hr=ae(Jt);function ht(e){return e.deep===!0?Se:e.deep===!1?wt:$s(e.defaultDecorator)}function Us(e){var n;return e?(n=e.defaultDecorator)!=null?n:fr(e):void 0}function $s(e){var n,r;return e&&(n=(r=e.options_)==null?void 0:r.enhancer)!=null?n:Se}function vr(e,n,r){if(tt(n))return Jt.decorate_20223_(e,n);if(Ae(n)){et(e,n,Jt);return}return Tr(e)?e:fe(e)?R.object(e,n,r):Array.isArray(e)?R.array(e,n):Ve(e)?R.map(e,n):le(e)?R.set(e,n):typeof e=="object"&&e!==null?e:R.box(e,n)}Qn(vr,hr);var Fs={box:function(n,r){var t=dt(r);return new je(n,ht(t),t.name,!0,t.equals)},array:function(n,r){var t=dt(r);return(v.useProxies===!1||t.proxy===!1?Ma:ja)(n,ht(t),t.name)},map:function(n,r){var t=dt(r);return new Mr(n,ht(t),t.name)},set:function(n,r){var t=dt(r);return new Rr(n,ht(t),t.name)},object:function(n,r,t){return De(function(){return Er(v.useProxies===!1||(t==null?void 0:t.proxy)===!1?$e({},t):ba({},t),n,r)})},ref:ae(ks),shallow:ae(Bs),deep:hr,struct:ae(Vs)},R=Qn(vr,Fs),_r="computed",zs="computed.struct",Qt=un(_r),Hs=un(zs,{equals:pt.structural}),Ct=function(n,r){if(tt(r))return Qt.decorate_20223_(n,r);if(Ae(r))return et(n,r,Qt);if(fe(n))return ae(un(_r,n));var t=fe(r)?r:{};return t.get=n,t.name||(t.name=n.name||""),new ne(t)};Object.assign(Ct,Qt);Ct.struct=ae(Hs);var Ln,kn,gt=0,Gs=1,Ks=(Ln=(kn=_t(function(){},"name"))==null?void 0:kn.configurable)!=null?Ln:!1,Bn={value:"action",configurable:!0,writable:!1,enumerable:!1};function we(e,n,r,t){r===void 0&&(r=!1);function i(){return Ws(e,r,n,t||this,arguments)}return i.isMobxAction=!0,i.toString=function(){return n.toString()},Ks&&(Bn.value=e,se(i,"name",Bn)),i}function Ws(e,n,r,t,i){var s=qs(e,n);try{return r.apply(t,i)}catch(o){throw s.error_=o,o}finally{Ys(s)}}function qs(e,n,r,t){var i=!1,s=0,o=v.trackingDerivation,l=!n||!o;J();var c=v.allowStateChanges;l&&(Ce(),c=cn(!0));var d=dn(!0),h={runAsAction_:l,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:d,notifySpy_:i,startTime_:s,actionId_:Gs++,parentActionId_:gt};return gt=h.actionId_,h}function Ys(e){gt!==e.actionId_&&S(30),gt=e.parentActionId_,e.error_!==void 0&&(v.suppressReactionErrors=!0),fn(e.prevAllowStateChanges_),We(e.prevAllowStateReads_),Q(),e.runAsAction_&&ce(e.prevDerivation_),v.suppressReactionErrors=!1}function cn(e){var n=v.allowStateChanges;return v.allowStateChanges=e,n}function fn(e){v.allowStateChanges=e}var je=function(e){function n(t,i,s,o,l){var c;return s===void 0&&(s="ObservableValue"),l===void 0&&(l=pt.default),c=e.call(this,s)||this,c.enhancer=void 0,c.name_=void 0,c.equals=void 0,c.hasUnreportedChange_=!1,c.interceptors_=void 0,c.changeListeners_=void 0,c.value_=void 0,c.dehancer=void 0,c.enhancer=i,c.name_=s,c.equals=l,c.value_=i(t,void 0,s),c}ar(n,e);var r=n.prototype;return r.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},r.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==v.UNCHANGED&&this.setNewValue_(i)},r.prepareNewValue_=function(i){if(Y(this)){var s=X(this,{object:this,type:oe,newValue:i});if(!s)return v.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?v.UNCHANGED:i},r.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),Z(this)&&ee(this,{type:oe,object:this,newValue:i,oldValue:s})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(i){return rt(this,i)},r.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:oe,newValue:this.value_,oldValue:void 0}),it(this,i)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return sr(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},n}(be),ne=function(){function e(r){this.dependenciesState_=A.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=A.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new bt(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=mt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||S(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=we("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?pt.structural:pt.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var n=e.prototype;return n.onBecomeStale_=function(){Zs(this)},n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(t){return t()})},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(t){return t()})},n.get=function(){if(this.isComputing&&S(32,this.name_,this.derivation),v.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Zt(this)&&(this.warnAboutUntrackedRead_(),J(),this.value_=this.computeValue_(!1),Q());else if(Or(this),Zt(this)){var t=v.trackingContext;this.keepAlive_&&!t&&(v.trackingContext=this),this.trackAndCompute()&&Qs(this),v.trackingContext=t}var i=this.value_;if(vt(i))throw i.cause;return i},n.set=function(t){if(this.setter_){this.isRunningSetter&&S(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter=!1}}else S(34,this.name_)},n.trackAndCompute=function(){var t=this.value_,i=this.dependenciesState_===A.NOT_TRACKING_,s=this.computeValue_(!0),o=i||vt(t)||vt(s)||!this.equals_(t,s);return o&&(this.value_=s),o},n.computeValue_=function(t){this.isComputing=!0;var i=cn(!1),s;if(t)s=pr(this,this.derivation,this.scope_);else if(v.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(o){s=new bt(o)}return fn(i),this.isComputing=!1,s},n.suspend_=function(){this.keepAlive_||(en(this),this.value_=void 0)},n.observe_=function(t,i){var s=this,o=!0,l=void 0;return ua(function(){var c=s.get();if(!o||i){var d=Ce();t({observableKind:"computed",debugObjectName:s.name_,type:oe,object:s,newValue:c,oldValue:l}),ce(d)}o=!1,l=c})},n.warnAboutUntrackedRead_=function(){},n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},n.valueOf=function(){return sr(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},Ue(e,[{key:"isComputing",get:function(){return F(this.flags_,e.isComputingMask_)},set:function(t){this.flags_=z(this.flags_,e.isComputingMask_,t)}},{key:"isRunningSetter",get:function(){return F(this.flags_,e.isRunningSetterMask_)},set:function(t){this.flags_=z(this.flags_,e.isRunningSetterMask_,t)}},{key:"isBeingObserved",get:function(){return F(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=z(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return F(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=z(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return F(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=z(this.flags_,e.diffValueMask_,t===1)}}])}();ne.isComputingMask_=1;ne.isRunningSetterMask_=2;ne.isBeingObservedMask_=4;ne.isPendingUnobservationMask_=8;ne.diffValueMask_=16;var Et=Pe("ComputedValue",ne),A;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(A||(A={}));var mt;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(mt||(mt={}));var bt=function(n){this.cause=void 0,this.cause=n};function vt(e){return e instanceof bt}function Zt(e){switch(e.dependenciesState_){case A.UP_TO_DATE_:return!1;case A.NOT_TRACKING_:case A.STALE_:return!0;case A.POSSIBLY_STALE_:{for(var n=dn(!0),r=Ce(),t=e.observing_,i=t.length,s=0;s<i;s++){var o=t[s];if(Et(o)){if(v.disableErrorBoundaries)o.get();else try{o.get()}catch{return ce(r),We(n),!0}if(e.dependenciesState_===A.STALE_)return ce(r),We(n),!0}}return mr(e),ce(r),We(n),!1}}}function pr(e,n,r){var t=dn(!0);mr(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++v.runId;var i=v.trackingDerivation;v.trackingDerivation=e,v.inBatch++;var s;if(v.disableErrorBoundaries===!0)s=n.call(r);else try{s=n.call(r)}catch(o){s=new bt(o)}return v.inBatch--,v.trackingDerivation=i,Xs(e),We(t),s}function Xs(e){for(var n=e.observing_,r=e.observing_=e.newObserving_,t=A.UP_TO_DATE_,i=0,s=e.unboundDepsCount_,o=0;o<s;o++){var l=r[o];l.diffValue===0&&(l.diffValue=1,i!==o&&(r[i]=l),i++),l.dependenciesState_>t&&(t=l.dependenciesState_)}for(r.length=i,e.newObserving_=null,s=n.length;s--;){var c=n[s];c.diffValue===0&&br(c,e),c.diffValue=0}for(;i--;){var d=r[i];d.diffValue===1&&(d.diffValue=0,Js(d,e))}t!==A.UP_TO_DATE_&&(e.dependenciesState_=t,e.onBecomeStale_())}function en(e){var n=e.observing_;e.observing_=[];for(var r=n.length;r--;)br(n[r],e);e.dependenciesState_=A.NOT_TRACKING_}function gr(e){var n=Ce();try{return e()}finally{ce(n)}}function Ce(){var e=v.trackingDerivation;return v.trackingDerivation=null,e}function ce(e){v.trackingDerivation=e}function dn(e){var n=v.allowStateReads;return v.allowStateReads=e,n}function We(e){v.allowStateReads=e}function mr(e){if(e.dependenciesState_!==A.UP_TO_DATE_){e.dependenciesState_=A.UP_TO_DATE_;for(var n=e.observing_,r=n.length;r--;)n[r].lowestObserverState_=A.UP_TO_DATE_}}var Vt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Ut=!0,v=function(){var e=on();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ut=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Vt().version&&(Ut=!1),Ut?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Vt):(setTimeout(function(){S(35)},1),new Vt)}();function Js(e,n){e.observers_.add(n),e.lowestObserverState_>n.dependenciesState_&&(e.lowestObserverState_=n.dependenciesState_)}function br(e,n){e.observers_.delete(n),e.observers_.size===0&&yr(e)}function yr(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,v.pendingUnobservations.push(e))}function J(){v.inBatch++}function Q(){if(--v.inBatch===0){jr();for(var e=v.pendingUnobservations,n=0;n<e.length;n++){var r=e[n];r.isPendingUnobservation=!1,r.observers_.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof ne&&r.suspend_())}v.pendingUnobservations=[]}}function Or(e){var n=v.trackingDerivation;return n!==null?(n.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=n.runId_,n.newObserving_[n.unboundDepsCount_++]=e,!e.isBeingObserved&&v.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&v.inBatch>0&&yr(e),!1)}function xr(e){e.lowestObserverState_!==A.STALE_&&(e.lowestObserverState_=A.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===A.UP_TO_DATE_&&n.onBecomeStale_(),n.dependenciesState_=A.STALE_}))}function Qs(e){e.lowestObserverState_!==A.STALE_&&(e.lowestObserverState_=A.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===A.POSSIBLY_STALE_?n.dependenciesState_=A.STALE_:n.dependenciesState_===A.UP_TO_DATE_&&(e.lowestObserverState_=A.UP_TO_DATE_)}))}function Zs(e){e.lowestObserverState_===A.UP_TO_DATE_&&(e.lowestObserverState_=A.POSSIBLY_STALE_,e.observers_.forEach(function(n){n.dependenciesState_===A.UP_TO_DATE_&&(n.dependenciesState_=A.POSSIBLY_STALE_,n.onBecomeStale_())}))}var me=function(){function e(r,t,i,s){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=A.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=mt.NONE,this.name_=r,this.onInvalidate_=t,this.errorHandler_=i,this.requiresObservable_=s}var n=e.prototype;return n.onBecomeStale_=function(){this.schedule_()},n.schedule_=function(){this.isScheduled||(this.isScheduled=!0,v.pendingReactions.push(this),jr())},n.runReaction_=function(){if(!this.isDisposed){J(),this.isScheduled=!1;var t=v.trackingContext;if(v.trackingContext=this,Zt(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}v.trackingContext=t,Q()}},n.track=function(t){if(!this.isDisposed){J(),this.isRunning=!0;var i=v.trackingContext;v.trackingContext=this;var s=pr(this,t,void 0);v.trackingContext=i,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&en(this),vt(s)&&this.reportExceptionInDerivation_(s.cause),Q()}},n.reportExceptionInDerivation_=function(t){var i=this;if(this.errorHandler_){this.errorHandler_(t,this);return}if(v.disableErrorBoundaries)throw t;var s="[mobx] uncaught error in '"+this+"'";v.suppressReactionErrors||console.error(s,t),v.globalReactionErrorHandlers.forEach(function(o){return o(t,i)})},n.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(J(),en(this),Q()))},n.getDisposer_=function(t){var i=this,s=function o(){i.dispose(),t==null||t.removeEventListener==null||t.removeEventListener("abort",o)};return t==null||t.addEventListener==null||t.addEventListener("abort",s),s[_]=this,s},n.toString=function(){return"Reaction["+this.name_+"]"},n.trace=function(t){},Ue(e,[{key:"isDisposed",get:function(){return F(this.flags_,e.isDisposedMask_)},set:function(t){this.flags_=z(this.flags_,e.isDisposedMask_,t)}},{key:"isScheduled",get:function(){return F(this.flags_,e.isScheduledMask_)},set:function(t){this.flags_=z(this.flags_,e.isScheduledMask_,t)}},{key:"isTrackPending",get:function(){return F(this.flags_,e.isTrackPendingMask_)},set:function(t){this.flags_=z(this.flags_,e.isTrackPendingMask_,t)}},{key:"isRunning",get:function(){return F(this.flags_,e.isRunningMask_)},set:function(t){this.flags_=z(this.flags_,e.isRunningMask_,t)}},{key:"diffValue",get:function(){return F(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=z(this.flags_,e.diffValueMask_,t===1)}}])}();me.isDisposedMask_=1;me.isScheduledMask_=2;me.isTrackPendingMask_=4;me.isRunningMask_=8;me.diffValueMask_=16;var ea=100,ta=function(n){return n()};function jr(){v.inBatch>0||v.isRunningReactions||ta(na)}function na(){v.isRunningReactions=!0;for(var e=v.pendingReactions,n=0;e.length>0;){++n===ea&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),t=0,i=r.length;t<i;t++)r[t].runReaction_()}v.isRunningReactions=!1}var yt=Pe("Reaction",me);function qe(){return!1}function ra(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var Ar="action",ia="action.bound",Sr="autoAction",sa="autoAction.bound",aa="<unnamed action>",tn=nt(Ar),oa=nt(ia,{bound:!0}),nn=nt(Sr,{autoAction:!0}),la=nt(sa,{autoAction:!0,bound:!0});function wr(e){var n=function(t,i){if(te(t))return we(t.name||aa,t,e);if(te(i))return we(t,i,e);if(tt(i))return(e?nn:tn).decorate_20223_(t,i);if(Ae(i))return et(t,i,e?nn:tn);if(Ae(t))return ae(nt(e?Sr:Ar,{name:t,autoAction:e}))};return n}var Le=wr(!1);Object.assign(Le,tn);var Xe=wr(!0);Object.assign(Xe,nn);Le.bound=ae(oa);Xe.bound=ae(la);function Je(e){return te(e)&&e.isMobxAction===!0}function ua(e,n){var r,t,i,s;n===void 0&&(n=Zn);var o=(r=(t=n)==null?void 0:t.name)!=null?r:"Autorun",l=!n.scheduler&&!n.delay,c;if(l)c=new me(o,function(){this.track(O)},n.onError,n.requiresObservable);else{var d=fa(n),h=!1;c=new me(o,function(){h||(h=!0,d(function(){h=!1,c.isDisposed||c.track(O)}))},n.onError,n.requiresObservable)}function O(){e(c)}return(i=n)!=null&&(i=i.signal)!=null&&i.aborted||c.schedule_(),c.getDisposer_((s=n)==null?void 0:s.signal)}var ca=function(n){return n()};function fa(e){return e.scheduler?e.scheduler:e.delay?function(n){return setTimeout(n,e.delay)}:ca}var da="onBO",ha="onBUO";function va(e,n,r){return Cr(da,e,n,r)}function Pr(e,n,r){return Cr(ha,e,n,r)}function Cr(e,n,r,t){var i=rn(n),s=te(t)?t:r,o=e+"L";return i[o]?i[o].add(s):i[o]=new Set([s]),function(){var l=i[o];l&&(l.delete(s),l.size===0&&delete i[o])}}function Er(e,n,r,t){var i=ts(n);return De(function(){var s=$e(e,t)[_];Ye(i).forEach(function(o){s.extend_(o,i[o],r&&o in r?r[o]:!0)})}),e}var _a=0;function Dr(){this.message="FLOW_CANCELLED"}Dr.prototype=Object.create(Error.prototype);var $t=ur("flow"),pa=ur("flow.bound",{bound:!0}),Be=Object.assign(function(n,r){if(tt(r))return $t.decorate_20223_(n,r);if(Ae(r))return et(n,r,$t);var t=n,i=t.name||"<unnamed flow>",s=function(){var l=this,c=arguments,d=++_a,h=Le(i+" - runid: "+d+" - init",t).apply(l,c),O,w=void 0,j=new Promise(function(B,k){var V=0;O=k;function de(T){w=void 0;var x;try{x=Le(i+" - runid: "+d+" - yield "+V++,h.next).call(h,T)}catch(E){return k(E)}I(x)}function U(T){w=void 0;var x;try{x=Le(i+" - runid: "+d+" - yield "+V++,h.throw).call(h,T)}catch(E){return k(E)}I(x)}function I(T){if(te(T==null?void 0:T.then)){T.then(I,k);return}return T.done?B(T.value):(w=Promise.resolve(T.value),w.then(de,U))}de(void 0)});return j.cancel=Le(i+" - runid: "+d+" - cancel",function(){try{w&&Vn(w);var B=h.return(void 0),k=Promise.resolve(B.value);k.then(Me,Me),Vn(k),O(new Dr)}catch(V){O(V)}}),j};return s.isMobXFlow=!0,s},$t);Be.bound=ae(pa);function Vn(e){te(e.cancel)&&e.cancel()}function Qe(e){return(e==null?void 0:e.isMobXFlow)===!0}function ga(e,n){return e?Tt(e)||!!e[_]||ln(e)||yt(e)||Et(e):!1}function Tr(e){return ga(e)}function ue(e,n){n===void 0&&(n=void 0),J();try{return e.apply(n)}finally{Q()}}function Te(e){return e[_]}var ma={has:function(n,r){return Te(n).has_(r)},get:function(n,r){return Te(n).get_(r)},set:function(n,r,t){var i;return Ae(r)?(i=Te(n).set_(r,t,!0))!=null?i:!0:!1},deleteProperty:function(n,r){var t;return Ae(r)?(t=Te(n).delete_(r,!0))!=null?t:!0:!1},defineProperty:function(n,r,t){var i;return(i=Te(n).defineProperty_(r,t))!=null?i:!0},ownKeys:function(n){return Te(n).ownKeys_()},preventExtensions:function(n){S(13)}};function ba(e,n){var r,t;return er(),e=$e(e,n),(t=(r=e[_]).proxy_)!=null?t:r.proxy_=new Proxy(e,ma)}function Y(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function rt(e,n){var r=e.interceptors_||(e.interceptors_=[]);return r.push(n),tr(function(){var t=r.indexOf(n);t!==-1&&r.splice(t,1)})}function X(e,n){var r=Ce();try{for(var t=[].concat(e.interceptors_||[]),i=0,s=t.length;i<s&&(n=t[i](n),n&&!n.type&&S(14),!!n);i++);return n}finally{ce(r)}}function Z(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function it(e,n){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(n),tr(function(){var t=r.indexOf(n);t!==-1&&r.splice(t,1)})}function ee(e,n){var r=Ce(),t=e.changeListeners_;if(t){t=t.slice();for(var i=0,s=t.length;i<s;i++)t[i](n);ce(r)}}var Ft=Symbol("mobx-keys");function ya(e,n,r){return fe(e)?Er(e,e,n,r):(De(function(){var t=$e(e,r)[_];if(!e[Ft]){var i=Object.getPrototypeOf(e),s=new Set([].concat(Ye(e),Ye(i)));s.delete("constructor"),s.delete(_),St(i,Ft,s)}e[Ft].forEach(function(o){return t.make_(o,n&&o in n?n[o]:!0)})}),e)}var Un="splice",oe="update",Oa=1e4,xa={get:function(n,r){var t=n[_];return r===_?t:r==="length"?t.getArrayLength_():typeof r=="string"&&!isNaN(r)?t.get_(parseInt(r)):ge(Ot,r)?Ot[r]:n[r]},set:function(n,r,t){var i=n[_];return r==="length"&&i.setArrayLength_(t),typeof r=="symbol"||isNaN(r)?n[r]=t:i.set_(parseInt(r),t),!0},preventExtensions:function(){S(15)}},hn=function(){function e(r,t,i,s){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new be(r),this.enhancer_=function(o,l){return t(o,l,"ObservableArray[..]")}}var n=e.prototype;return n.dehanceValue_=function(t){return this.dehancer!==void 0?this.dehancer(t):t},n.dehanceValues_=function(t){return this.dehancer!==void 0&&t.length>0?t.map(this.dehancer):t},n.intercept_=function(t){return rt(this,t)},n.observe_=function(t,i){return i===void 0&&(i=!1),i&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),it(this,t)},n.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},n.setArrayLength_=function(t){(typeof t!="number"||isNaN(t)||t<0)&&S("Out of range: "+t);var i=this.values_.length;if(t!==i)if(t>i){for(var s=new Array(t-i),o=0;o<t-i;o++)s[o]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(t,i-t)},n.updateArrayLength_=function(t,i){t!==this.lastKnownLength_&&S(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&Br(t+i+1)},n.spliceWithArray_=function(t,i,s){var o=this;this.atom_;var l=this.values_.length;if(t===void 0?t=0:t>l?t=l:t<0&&(t=Math.max(0,l+t)),arguments.length===1?i=l-t:i==null?i=0:i=Math.max(0,Math.min(i,l-t)),s===void 0&&(s=Yt),Y(this)){var c=X(this,{object:this.proxy_,type:Un,index:t,removedCount:i,added:s});if(!c)return Yt;i=c.removedCount,s=c.added}if(s=s.length===0?s:s.map(function(O){return o.enhancer_(O,void 0)}),this.legacyMode_){var d=s.length-i;this.updateArrayLength_(l,d)}var h=this.spliceItemsIntoValues_(t,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(t,s,h),this.dehanceValues_(h)},n.spliceItemsIntoValues_=function(t,i,s){if(s.length<Oa){var o;return(o=this.values_).splice.apply(o,[t,i].concat(s))}else{var l=this.values_.slice(t,t+i),c=this.values_.slice(t+i);this.values_.length+=s.length-i;for(var d=0;d<s.length;d++)this.values_[t+d]=s[d];for(var h=0;h<c.length;h++)this.values_[t+s.length+h]=c[h];return l}},n.notifyArrayChildUpdate_=function(t,i,s){var o=!this.owned_&&qe(),l=Z(this),c=l||o?{observableKind:"array",object:this.proxy_,type:oe,debugObjectName:this.atom_.name_,index:t,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),l&&ee(this,c)},n.notifyArraySplice_=function(t,i,s){var o=!this.owned_&&qe(),l=Z(this),c=l||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Un,index:t,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),l&&ee(this,c)},n.get_=function(t){if(this.legacyMode_&&t>=this.values_.length){console.warn("[mobx] Out of bounds read: "+t);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t])},n.set_=function(t,i){var s=this.values_;if(this.legacyMode_&&t>s.length&&S(17,t,s.length),t<s.length){this.atom_;var o=s[t];if(Y(this)){var l=X(this,{type:oe,object:this.proxy_,index:t,newValue:i});if(!l)return;i=l.newValue}i=this.enhancer_(i,o);var c=i!==o;c&&(s[t]=i,this.notifyArrayChildUpdate_(t,i,o))}else{for(var d=new Array(t+1-s.length),h=0;h<d.length-1;h++)d[h]=void 0;d[d.length-1]=i,this.spliceWithArray_(s.length,0,d)}},e}();function ja(e,n,r,t){return r===void 0&&(r="ObservableArray"),t===void 0&&(t=!1),er(),De(function(){var i=new hn(r,n,t,!1);rr(i.values_,_,i);var s=new Proxy(i.values_,xa);return i.proxy_=s,e&&e.length&&i.spliceWithArray_(0,0,e),s})}var Ot={clear:function(){return this.splice(0)},replace:function(n){var r=this[_];return r.spliceWithArray_(0,r.values_.length,n)},toJSON:function(){return this.slice()},splice:function(n,r){for(var t=arguments.length,i=new Array(t>2?t-2:0),s=2;s<t;s++)i[s-2]=arguments[s];var o=this[_];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(n);case 2:return o.spliceWithArray_(n,r)}return o.spliceWithArray_(n,r,i)},spliceWithArray:function(n,r,t){return this[_].spliceWithArray_(n,r,t)},push:function(){for(var n=this[_],r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return n.spliceWithArray_(n.values_.length,0,t),n.values_.length},pop:function(){return this.splice(Math.max(this[_].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var n=this[_],r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return n.spliceWithArray_(0,0,t),n.values_.length},reverse:function(){return v.trackingDerivation&&S(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){v.trackingDerivation&&S(37,"sort");var n=this.slice();return n.sort.apply(n,arguments),this.replace(n),this},remove:function(n){var r=this[_],t=r.dehanceValues_(r.values_).indexOf(n);return t>-1?(this.splice(t,1),!0):!1}};C("at",H);C("concat",H);C("flat",H);C("includes",H);C("indexOf",H);C("join",H);C("lastIndexOf",H);C("slice",H);C("toString",H);C("toLocaleString",H);C("toSorted",H);C("toSpliced",H);C("with",H);C("every",re);C("filter",re);C("find",re);C("findIndex",re);C("findLast",re);C("findLastIndex",re);C("flatMap",re);C("forEach",re);C("map",re);C("some",re);C("toReversed",re);C("reduce",Ir);C("reduceRight",Ir);function C(e,n){typeof Array.prototype[e]=="function"&&(Ot[e]=n(e))}function H(e){return function(){var n=this[_];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_);return r[e].apply(r,arguments)}}function re(e){return function(n,r){var t=this,i=this[_];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[e](function(o,l){return n.call(r,o,l,t)})}}function Ir(e){return function(){var n=this,r=this[_];r.atom_.reportObserved();var t=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(s,o,l){return i(s,o,l,n)},t[e].apply(t,arguments)}}var Aa=Pe("ObservableArrayAdministration",hn);function Dt(e){return At(e)&&Aa(e[_])}var Sa={},pe="add",xt="delete",Mr=function(){function e(r,t,i){var s=this;t===void 0&&(t=Se),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[_]=Sa,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=i,te(Map)||S(18),De(function(){s.keysAtom_=or("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,r&&s.merge(r)})}var n=e.prototype;return n.has_=function(t){return this.data_.has(t)},n.has=function(t){var i=this;if(!v.trackingDerivation)return this.has_(t);var s=this.hasMap_.get(t);if(!s){var o=s=new je(this.has_(t),wt,"ObservableMap.key?",!1);this.hasMap_.set(t,o),Pr(o,function(){return i.hasMap_.delete(t)})}return s.get()},n.set=function(t,i){var s=this.has_(t);if(Y(this)){var o=X(this,{type:s?oe:pe,object:this,newValue:i,name:t});if(!o)return this;i=o.newValue}return s?this.updateValue_(t,i):this.addValue_(t,i),this},n.delete=function(t){var i=this;if(this.keysAtom_,Y(this)){var s=X(this,{type:xt,object:this,name:t});if(!s)return!1}if(this.has_(t)){var o=qe(),l=Z(this),c=l||o?{observableKind:"map",debugObjectName:this.name_,type:xt,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return ue(function(){var d;i.keysAtom_.reportChanged(),(d=i.hasMap_.get(t))==null||d.setNewValue_(!1);var h=i.data_.get(t);h.setNewValue_(void 0),i.data_.delete(t)}),l&&ee(this,c),!0}return!1},n.updateValue_=function(t,i){var s=this.data_.get(t);if(i=s.prepareNewValue_(i),i!==v.UNCHANGED){var o=qe(),l=Z(this),c=l||o?{observableKind:"map",debugObjectName:this.name_,type:oe,object:this,oldValue:s.value_,name:t,newValue:i}:null;s.setNewValue_(i),l&&ee(this,c)}},n.addValue_=function(t,i){var s=this;this.keysAtom_,ue(function(){var d,h=new je(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(t,h),i=h.value_,(d=s.hasMap_.get(t))==null||d.setNewValue_(!0),s.keysAtom_.reportChanged()});var o=qe(),l=Z(this),c=l||o?{observableKind:"map",debugObjectName:this.name_,type:pe,object:this,name:t,newValue:i}:null;l&&ee(this,c)},n.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},n.dehanceValue_=function(t){return this.dehancer!==void 0?this.dehancer(t):t},n.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},n.values=function(){var t=this,i=this.keys();return $n({next:function(){var o=i.next(),l=o.done,c=o.value;return{done:l,value:l?void 0:t.get(c)}}})},n.entries=function(){var t=this,i=this.keys();return $n({next:function(){var o=i.next(),l=o.done,c=o.value;return{done:l,value:l?void 0:[c,t.get(c)]}}})},n[Symbol.iterator]=function(){return this.entries()},n.forEach=function(t,i){for(var s=Re(this),o;!(o=s()).done;){var l=o.value,c=l[0],d=l[1];t.call(i,d,c,this)}},n.merge=function(t){var i=this;return Ee(t)&&(t=new Map(t)),ue(function(){fe(t)?es(t).forEach(function(s){return i.set(s,t[s])}):Array.isArray(t)?t.forEach(function(s){var o=s[0],l=s[1];return i.set(o,l)}):Ve(t)?(Zi(t)||S(19,t),t.forEach(function(s,o){return i.set(o,s)})):t!=null&&S(20,t)}),this},n.clear=function(){var t=this;ue(function(){gr(function(){for(var i=Re(t.keys()),s;!(s=i()).done;){var o=s.value;t.delete(o)}})})},n.replace=function(t){var i=this;return ue(function(){for(var s=wa(t),o=new Map,l=!1,c=Re(i.data_.keys()),d;!(d=c()).done;){var h=d.value;if(!s.has(h)){var O=i.delete(h);if(O)l=!0;else{var w=i.data_.get(h);o.set(h,w)}}}for(var j=Re(s.entries()),B;!(B=j()).done;){var k=B.value,V=k[0],de=k[1],U=i.data_.has(V);if(i.set(V,de),i.data_.has(V)){var I=i.data_.get(V);o.set(V,I),U||(l=!0)}}if(!l)if(i.data_.size!==o.size)i.keysAtom_.reportChanged();else for(var T=i.data_.keys(),x=o.keys(),E=T.next(),he=x.next();!E.done;){if(E.value!==he.value){i.keysAtom_.reportChanged();break}E=T.next(),he=x.next()}i.data_=o}),this},n.toString=function(){return"[object ObservableMap]"},n.toJSON=function(){return Array.from(this)},n.observe_=function(t,i){return it(this,t)},n.intercept_=function(t){return rt(this,t)},Ue(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Ee=Pe("ObservableMap",Mr);function $n(e){return e[Symbol.toStringTag]="MapIterator",_n(e)}function wa(e){if(Ve(e)||Ee(e))return e;if(Array.isArray(e))return new Map(e);if(fe(e)){var n=new Map;for(var r in e)n.set(r,e[r]);return n}else return S(21,e)}var Pa={},Rr=function(){function e(r,t,i){var s=this;t===void 0&&(t=Se),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[_]=Pa,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,te(Set)||S(22),this.enhancer_=function(o,l){return t(o,l,i)},De(function(){s.atom_=or(s.name_),r&&s.replace(r)})}var n=e.prototype;return n.dehanceValue_=function(t){return this.dehancer!==void 0?this.dehancer(t):t},n.clear=function(){var t=this;ue(function(){gr(function(){for(var i=Re(t.data_.values()),s;!(s=i()).done;){var o=s.value;t.delete(o)}})})},n.forEach=function(t,i){for(var s=Re(this),o;!(o=s()).done;){var l=o.value;t.call(i,l,l,this)}},n.add=function(t){var i=this;if(this.atom_,Y(this)){var s=X(this,{type:pe,object:this,newValue:t});if(!s)return this;t=s.newValue}if(!this.has(t)){ue(function(){i.data_.add(i.enhancer_(t,void 0)),i.atom_.reportChanged()});var o=!1,l=Z(this),c=l||o?{observableKind:"set",debugObjectName:this.name_,type:pe,object:this,newValue:t}:null;l&&ee(this,c)}return this},n.delete=function(t){var i=this;if(Y(this)){var s=X(this,{type:xt,object:this,oldValue:t});if(!s)return!1}if(this.has(t)){var o=!1,l=Z(this),c=l||o?{observableKind:"set",debugObjectName:this.name_,type:xt,object:this,oldValue:t}:null;return ue(function(){i.atom_.reportChanged(),i.data_.delete(t)}),l&&ee(this,c),!0}return!1},n.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},n.entries=function(){var t=this.values();return Fn({next:function(){var s=t.next(),o=s.value,l=s.done;return l?{value:void 0,done:l}:{value:[o,o],done:l}}})},n.keys=function(){return this.values()},n.values=function(){this.atom_.reportObserved();var t=this,i=this.data_.values();return Fn({next:function(){var o=i.next(),l=o.value,c=o.done;return c?{value:void 0,done:c}:{value:t.dehanceValue_(l),done:c}}})},n.intersection=function(t){if(le(t)&&!ie(t))return t.intersection(this);var i=new Set(this);return i.intersection(t)},n.union=function(t){if(le(t)&&!ie(t))return t.union(this);var i=new Set(this);return i.union(t)},n.difference=function(t){return new Set(this).difference(t)},n.symmetricDifference=function(t){if(le(t)&&!ie(t))return t.symmetricDifference(this);var i=new Set(this);return i.symmetricDifference(t)},n.isSubsetOf=function(t){return new Set(this).isSubsetOf(t)},n.isSupersetOf=function(t){return new Set(this).isSupersetOf(t)},n.isDisjointFrom=function(t){if(le(t)&&!ie(t))return t.isDisjointFrom(this);var i=new Set(this);return i.isDisjointFrom(t)},n.replace=function(t){var i=this;return ie(t)&&(t=new Set(t)),ue(function(){Array.isArray(t)?(i.clear(),t.forEach(function(s){return i.add(s)})):le(t)?(i.clear(),t.forEach(function(s){return i.add(s)})):t!=null&&S("Cannot initialize set from "+t)}),this},n.observe_=function(t,i){return it(this,t)},n.intercept_=function(t){return rt(this,t)},n.toJSON=function(){return Array.from(this)},n.toString=function(){return"[object ObservableSet]"},n[Symbol.iterator]=function(){return this.values()},Ue(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),ie=Pe("ObservableSet",Rr);function Fn(e){return e[Symbol.toStringTag]="SetIterator",_n(e)}var zn=Object.create(null),Hn="remove",Nr=function(){function e(r,t,i,s){t===void 0&&(t=new Map),s===void 0&&(s=Es),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=t,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new be("ObservableObject.keys"),this.isPlainObject_=fe(this.target_)}var n=e.prototype;return n.getObservablePropValue_=function(t){return this.values_.get(t).get()},n.setObservablePropValue_=function(t,i){var s=this.values_.get(t);if(s instanceof ne)return s.set(i),!0;if(Y(this)){var o=X(this,{type:oe,object:this.proxy_||this.target_,name:t,newValue:i});if(!o)return null;i=o.newValue}if(i=s.prepareNewValue_(i),i!==v.UNCHANGED){var l=Z(this),c=!1,d=l||c?{type:oe,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:t,newValue:i}:null;s.setNewValue_(i),l&&ee(this,d)}return!0},n.get_=function(t){return v.trackingDerivation&&!ge(this.target_,t)&&this.has_(t),this.target_[t]},n.set_=function(t,i,s){return s===void 0&&(s=!1),ge(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,i):s?Reflect.set(this.target_,t,i):(this.target_[t]=i,!0):this.extend_(t,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},n.has_=function(t){if(!v.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(t);return i||(i=new je(t in this.target_,wt,"ObservableObject.key?",!1),this.pendingKeys_.set(t,i)),i.get()},n.make_=function(t,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(t in this.target_)){var s;if((s=this.target_[Ne])!=null&&s[t])return;S(1,i.annotationType_,this.name_+"."+t.toString())}for(var o=this.target_;o&&o!==jt;){var l=_t(o,t);if(l){var c=i.make_(this,t,l,o);if(c===0)return;if(c===1)break}o=Object.getPrototypeOf(o)}Kn(this,i,t)}},n.extend_=function(t,i,s,o){if(o===void 0&&(o=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(t,i,o);var l=s.extend_(this,t,i,o);return l&&Kn(this,s,t),l},n.defineProperty_=function(t,i,s){s===void 0&&(s=!1),this.keysAtom_;try{J();var o=this.delete_(t);if(!o)return o;if(Y(this)){var l=X(this,{object:this.proxy_||this.target_,name:t,type:pe,newValue:i.value});if(!l)return null;var c=l.newValue;i.value!==c&&(i=ke({},i,{value:c}))}if(s){if(!Reflect.defineProperty(this.target_,t,i))return!1}else se(this.target_,t,i);this.notifyPropertyAddition_(t,i.value)}finally{Q()}return!0},n.defineObservableProperty_=function(t,i,s,o){o===void 0&&(o=!1),this.keysAtom_;try{J();var l=this.delete_(t);if(!l)return l;if(Y(this)){var c=X(this,{object:this.proxy_||this.target_,name:t,type:pe,newValue:i});if(!c)return null;i=c.newValue}var d=Gn(t),h={configurable:v.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:d.get,set:d.set};if(o){if(!Reflect.defineProperty(this.target_,t,h))return!1}else se(this.target_,t,h);var O=new je(i,s,"ObservableObject.key",!1);this.values_.set(t,O),this.notifyPropertyAddition_(t,O.value_)}finally{Q()}return!0},n.defineComputedProperty_=function(t,i,s){s===void 0&&(s=!1),this.keysAtom_;try{J();var o=this.delete_(t);if(!o)return o;if(Y(this)){var l=X(this,{object:this.proxy_||this.target_,name:t,type:pe,newValue:void 0});if(!l)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var c=Gn(t),d={configurable:v.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:c.get,set:c.set};if(s){if(!Reflect.defineProperty(this.target_,t,d))return!1}else se(this.target_,t,d);this.values_.set(t,new ne(i)),this.notifyPropertyAddition_(t,void 0)}finally{Q()}return!0},n.delete_=function(t,i){if(i===void 0&&(i=!1),this.keysAtom_,!ge(this.target_,t))return!0;if(Y(this)){var s=X(this,{object:this.proxy_||this.target_,name:t,type:Hn});if(!s)return null}try{var o;J();var l=Z(this),c=!1,d=this.values_.get(t),h=void 0;if(!d&&(l||c)){var O;h=(O=_t(this.target_,t))==null?void 0:O.value}if(i){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(d&&(this.values_.delete(t),d instanceof je&&(h=d.value_),xr(d)),this.keysAtom_.reportChanged(),(o=this.pendingKeys_)==null||(o=o.get(t))==null||o.set(t in this.target_),l||c){var w={type:Hn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:h,name:t};l&&ee(this,w)}}finally{Q()}return!0},n.observe_=function(t,i){return it(this,t)},n.intercept_=function(t){return rt(this,t)},n.notifyPropertyAddition_=function(t,i){var s,o=Z(this),l=!1;if(o||l){var c=o||l?{type:pe,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:i}:null;o&&ee(this,c)}(s=this.pendingKeys_)==null||(s=s.get(t))==null||s.set(!0),this.keysAtom_.reportChanged()},n.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ye(this.target_)},n.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function $e(e,n){var r;if(ge(e,_))return e;var t=(r=n==null?void 0:n.name)!=null?r:"ObservableObject",i=new Nr(e,new Map,String(t),Us(n));return St(e,_,i),e}var Ca=Pe("ObservableObjectAdministration",Nr);function Gn(e){return zn[e]||(zn[e]={get:function(){return this[_].getObservablePropValue_(e)},set:function(r){return this[_].setObservablePropValue_(e,r)}})}function Tt(e){return At(e)?Ca(e[_]):!1}function Kn(e,n,r){var t;(t=e.target_[Ne])==null||delete t[r]}var Ea=kr(0),Da=function(){var e=!1,n={};return Object.defineProperty(n,"0",{set:function(){e=!0}}),Object.create(n)[0]=1,e===!1}(),zt=0,Lr=function(){};function Ta(e,n){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,n):e.prototype.__proto__!==void 0?e.prototype.__proto__=n:e.prototype=n}Ta(Lr,Array.prototype);var vn=function(e){function n(t,i,s,o){var l;return s===void 0&&(s="ObservableArray"),o===void 0&&(o=!1),l=e.call(this)||this,De(function(){var c=new hn(s,i,o,!0);c.proxy_=l,rr(l,_,c),t&&t.length&&l.spliceWithArray(0,0,t),Da&&Object.defineProperty(l,"0",Ea)}),l}ar(n,e);var r=n.prototype;return r.concat=function(){this[_].atom_.reportObserved();for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return Array.prototype.concat.apply(this.slice(),s.map(function(l){return Dt(l)?l.slice():l}))},r[Symbol.iterator]=function(){var t=this,i=0;return _n({next:function(){return i<t.length?{value:t[i++],done:!1}:{done:!0,value:void 0}}})},Ue(n,[{key:"length",get:function(){return this[_].getArrayLength_()},set:function(i){this[_].setArrayLength_(i)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(Lr);Object.entries(Ot).forEach(function(e){var n=e[0],r=e[1];n!=="concat"&&St(vn.prototype,n,r)});function kr(e){return{enumerable:!1,configurable:!0,get:function(){return this[_].get_(e)},set:function(r){this[_].set_(e,r)}}}function Ia(e){se(vn.prototype,""+e,kr(e))}function Br(e){if(e>zt){for(var n=zt;n<e+100;n++)Ia(n);zt=e}}Br(1e3);function Ma(e,n,r){return new vn(e,n,r)}function rn(e,n){if(typeof e=="object"&&e!==null){if(Dt(e))return n!==void 0&&S(23),e[_].atom_;if(ie(e))return e.atom_;if(Ee(e)){if(n===void 0)return e.keysAtom_;var r=e.data_.get(n)||e.hasMap_.get(n);return r||S(25,n,sn(e)),r}if(Tt(e)){if(!n)return S(26);var t=e[_].values_.get(n);return t||S(27,n,sn(e)),t}if(ln(e)||Et(e)||yt(e))return e}else if(te(e)&&yt(e[_]))return e[_];S(28)}function Ra(e,n){if(e||S(29),ln(e)||Et(e)||yt(e)||Ee(e)||ie(e))return e;if(e[_])return e[_];S(24,e)}function sn(e,n){var r;if(n!==void 0)r=rn(e,n);else{if(Je(e))return e.name;Tt(e)||Ee(e)||ie(e)?r=Ra(e):r=rn(e)}return r.name_}function De(e){var n=Ce(),r=cn(!0);J();try{return e()}finally{Q(),fn(r),ce(n)}}var Wn=jt.toString;function Vr(e,n,r){return r===void 0&&(r=-1),an(e,n,r)}function an(e,n,r,t,i){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var s=typeof e;if(s!=="function"&&s!=="object"&&typeof n!="object")return!1;var o=Wn.call(e);if(o!==Wn.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=qn(e),n=qn(n);var l=o==="[object Array]";if(!l){if(typeof e!="object"||typeof n!="object")return!1;var c=e.constructor,d=n.constructor;if(c!==d&&!(te(c)&&c instanceof c&&te(d)&&d instanceof d)&&"constructor"in e&&"constructor"in n)return!1}if(r===0)return!1;r<0&&(r=-1),t=t||[],i=i||[];for(var h=t.length;h--;)if(t[h]===e)return i[h]===n;if(t.push(e),i.push(n),l){if(h=e.length,h!==n.length)return!1;for(;h--;)if(!an(e[h],n[h],r-1,t,i))return!1}else{var O=Object.keys(e),w=O.length;if(Object.keys(n).length!==w)return!1;for(var j=0;j<w;j++){var B=O[j];if(!(ge(n,B)&&an(e[B],n[B],r-1,t,i)))return!1}}return t.pop(),i.pop(),!0}function qn(e){return Dt(e)?e.slice():Ve(e)||Ee(e)||le(e)||ie(e)?Array.from(e.entries()):e}var Yn,Na=((Yn=on().Iterator)==null?void 0:Yn.prototype)||{};function _n(e){return e[Symbol.iterator]=La,Object.assign(Object.create(Na),e)}function La(){return this}["Symbol","Map","Set"].forEach(function(e){var n=on();typeof n[e]>"u"&&S("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:ra,extras:{getDebugName:sn},$mobx:_});class ka{constructor(){Ge(this,"wayBilllist",[]);Ge(this,"setWayBillList",n=>{this.wayBilllist=n});Ge(this,"insurancePersonInfo",{});Ge(this,"setInsurancePersonInfo",n=>{this.insurancePersonInfo=n});ya(this)}}const Ba=new ka,Va=({visible:e,onCancel:n,selectedVehicles:r,onSuccess:t,waybillNo:i})=>{const[s,o]=y.useState(0),[l,c]=y.useState(null),[d,h]=y.useState([]),[O,w]=y.useState(!1),{insurancePersonInfo:j,setInsurancePersonInfo:B}=Ba;y.useEffect(()=>{if((r==null?void 0:r.length)>0){const x=r.map(E=>({id:E.id,vin:E.vin,vehicleAttribute:`${E.vehicleName}`,startLocation:"上海市浦东新区",endLocation:E.targetWarehouse,contractPrice:E.contractPrice?E.contractPrice/1e4:0,insuranceAmount:E.contractPrice?E.contractPrice*.8:0,insurancePremium:E.contractPrice?E.contractPrice*.008:0,insuranceStartDate:"",insuranceEndDate:""}));h(x)}},[r]),y.useEffect(()=>{e&&de()},[e]);const k=x=>{if(c(x),x){const E=x.format("YYYY-MM-DD HH:mm:ss"),he=x.add(3,"month").format("YYYY-MM-DD HH:mm:ss"),Fe=d.map(ve=>({...ve,insuranceStartDate:E,insuranceEndDate:he}));h(Fe)}},V=[{title:"序号",key:"index",width:60,render:(x,E,he)=>he+1},{title:"车架号",dataIndex:"vin",key:"vin",width:150},{title:"车型",dataIndex:"vehicleName",key:"vehicleName",width:200},{title:"起始地",dataIndex:"startLocation",key:"startLocation",width:150},{title:"目的地",dataIndex:"endLocation",key:"endLocation",width:120},{title:"合同价(万元)",dataIndex:"contractPrice",key:"contractPrice",width:120,render:x=>x.toFixed(2)},{title:"保额",dataIndex:"insuranceAmount",key:"insuranceAmount",width:120,render:x=>x.toLocaleString()},{title:"保险金额(万元)",dataIndex:"insurancePremium",key:"insurancePremium",width:120,render:x=>(x/1e4).toFixed(2)},{title:"保险起期",dataIndex:"insuranceStartDate",key:"insuranceStartDate",width:120},{title:"保险终期",dataIndex:"insuranceEndDate",key:"insuranceEndDate",width:120}],de=async()=>{const x=await di({tmsWaybillNo:i});B(x.result),console.log(x,"getInsurancePersonInfo")},U=()=>{o(0)},I=async()=>{try{w(!0),await new Promise(x=>setTimeout(x,2e3)),await hi({tmsWaybillNo:i,takeEffect:xe(l).format("YYYY-MM-DD HH:mm:ss"),tmsWaybillCarDTOList:d}),m.success(`成功创建 ${r.length} 辆车的电子保单`),w(!1),t(),T()}catch{w(!1),m.error("创建保单失败")}},T=()=>{o(0),c(null),n()};return a.jsx(Oe,{title:"创建电子保单",open:e,onCancel:T,width:1200,height:600,style:{overflowY:"scroll"},onOk:I,okText:"创建",cancelText:"关闭",className:$.insuranceModal,destroyOnClose:!0,children:a.jsxs("div",{className:$.modalContent,children:[s===0&&a.jsxs("div",{className:$.stepContent,children:[a.jsx("div",{className:$.dateSelector,children:a.jsxs(q,{gutter:16,align:"middle",children:[a.jsx(P,{span:4,children:a.jsx("label",{className:$.label,children:"保险生效起期："})}),a.jsx(P,{span:8,children:a.jsx(Xn,{showTime:!0,value:l,onChange:k,placeholder:"请选择保险生效起期",style:{width:"100%"},disabledDate:x=>x&&x<xe().startOf("day")})}),a.jsx(P,{span:12,children:a.jsx("span",{className:$.hint,children:"选择起期后，保险终期将自动设置为起期后3个月"})})]})}),a.jsx("div",{className:$.vehicleTable,children:a.jsx(Jn,{columns:V,dataSource:d,rowKey:"id",pagination:!1,scroll:{x:1200},size:"small"})}),a.jsx("div",{children:a.jsxs(q,{gutter:24,children:[a.jsx(P,{span:12,children:a.jsxs(p,{bordered:!0,column:1,size:"small",className:$.infoSection,children:[a.jsx(p.Item,{label:"被投保人",children:j.insuredPersonName}),a.jsx(p.Item,{label:"统一社会信用代码",children:j.insuredPersonReditCode}),a.jsx(p.Item,{label:"被投保联系人",children:j.insuredPersonContactName}),a.jsx(p.Item,{label:"联系电话",children:j.insuredPersonContactPhone})]})}),a.jsx(P,{span:12,children:a.jsxs(p,{bordered:!0,column:1,size:"small",className:$.infoSection,children:[a.jsx(p.Item,{label:"投保人",children:j.policyholderName}),a.jsx(p.Item,{label:"统一社会信用代码",children:j.policyholderReditCode}),a.jsx(p.Item,{label:"投保联系人",children:j.policyholderContactName}),a.jsx(p.Item,{label:"联系电话",children:j.policyholderContactPhone})]})})]})})]}),s===1&&a.jsxs("div",{className:$.stepContent,children:[a.jsx("h3",{children:"投被保信息"}),a.jsx("div",{children:a.jsxs(q,{gutter:24,children:[a.jsx(P,{span:12,children:a.jsxs(p,{bordered:!0,column:1,size:"small",className:$.infoSection,children:[a.jsx(p.Item,{label:"被投保人",children:j.insuredPersonName}),a.jsx(p.Item,{label:"统一社会信用代码",children:j.insuredPersonReditCode}),a.jsx(p.Item,{label:"被投保联系人",children:j.insuredPersonContactName}),a.jsx(p.Item,{label:"联系电话",children:j.insuredPersonContactPhone})]})}),a.jsx(P,{span:12,children:a.jsxs(p,{bordered:!0,column:1,size:"small",className:$.infoSection,children:[a.jsx(p.Item,{label:"投保人",children:j.policyholderName}),a.jsx(p.Item,{label:"统一社会信用代码",children:j.policyholderReditCode}),a.jsx(p.Item,{label:"投保联系人",children:j.policyholderContactName}),a.jsx(p.Item,{label:"联系电话",children:j.policyholderContactPhone})]})})]})}),a.jsx("div",{className:$.stepButtons,children:a.jsxs(Ie,{children:[a.jsx(L,{onClick:T,children:"关闭"}),a.jsx(L,{onClick:U,children:"上一步"}),a.jsx(L,{type:"primary",onClick:I,loading:O,children:"创建"})]})})]})]})})},ro=()=>{var yn,On,xn,jn,An,Sn,wn,Pn,Cn,En,Dn,Tn,In;const{id:e}=li(),n=ui(),[r,t]=y.useState(!0),[i,s]=y.useState(null),[o,l]=y.useState([]),[c,d]=y.useState(!1),[h,O]=y.useState(""),[w,j]=y.useState(W.FRONT_LEFT_45),[B,k]=y.useState(!1),[V,de]=y.useState(""),[U]=M.useForm(),[I,T]=y.useState({}),[x,E]=y.useState(!1),[he,Fe]=y.useState(!1),[ve]=M.useForm(),[pn,st]=y.useState(!1),[at,ze]=y.useState([]),[G,It]=y.useState(null),[Ur,ot]=y.useState(!1),[Mt,lt]=y.useState([]),[$r,gn]=y.useState("inspection"),[Ua,$a]=y.useState(!1),[Fa,za]=y.useState(!1),mn=[{name:"leftFront45",label:"左前45度照片",value:"1"},{name:"leftFrontDoor",label:"左前门含A柱的照片",value:"2"},{name:"leftRearDoor",label:"左后门的照片",value:"3"},{name:"rearWheel",label:"后轮轮毂照片",value:"4"},{name:"centerConsole",label:"中控台照片",value:"5"},{name:"dashboard",label:"仪表盘照片",value:"6"},{name:"rightRear45",label:"右后45度照片",value:"7"},{name:"rightFrontDoor",label:"右前门含A柱的照片",value:"8"},{name:"nameplate",label:"铭牌照片",value:"9"},{name:"inventoryForm",label:"商品车入库信息采集表",value:"10"},{name:"engineBay",label:"发动机舱",value:"11"}];W.FRONT_LEFT_45,W.FRONT_LEFT_DOOR_A_PILLAR,W.REAR_LEFT_DOOR,W.REAR_WHEEL_HUB,W.CENTER_CONSOLE,W.DASHBOARD,W.RIGHT_REAR_45,W.RIGHT_FRONT_DOOR_A_PILLAR,W.NAMEPLATE,W.INVENTORY_FORM,W.ENGINE_BAY,y.useEffect(()=>{Fr(),e&&He()},[e]);const Fr=async()=>{const u=await ci("FileTypeEnum");console.log("....getUploadVehicleTypeEnum",u)},He=async()=>{try{t(!0);const u=await vi(e);console.log("....response",u),s(u)}catch(u){m.error("获取运单详情失败"),console.error("获取运单详情失败:",u)}finally{t(!1)}},zr=u=>{const g={pending:{color:"orange",text:"待发车"},in_transit:{color:"blue",text:"运输中"},delivered:{color:"green",text:"已送达"},cancelled:{color:"red",text:"已取消"}}[u]||{color:"default",text:"未知"};return a.jsx(kt,{color:g.color,children:g.text})},Hr=[{title:"序号",key:"index",width:60,render:(u,f,g)=>g+1},{title:"车架号",dataIndex:"vin",key:"vin",width:150},{title:"车型",dataIndex:"vehicleName",key:"vehicleName",width:120},{title:"内外饰",key:"outInColor",width:150},{title:"目的仓库",dataIndex:"targetWarehouse",key:"targetWarehouse",width:120,render:u=>{var f;return a.jsx("div",{color:"blue",children:(f=i==null?void 0:i.wmsWarehouseDTO)==null?void 0:f.warehouseAddress})}},{title:"合同价(元)",dataIndex:"contractAmountStr",key:"contractAmountStr",width:100},{title:"指导价(元)",dataIndex:"guidePrice",key:"guidePrice",width:100},{title:"预计到达时间",dataIndex:"estimatedArrivalTime",key:"estimatedArrivalTime",width:150,render:u=>a.jsx("div",{children:i==null?void 0:i.reachTimeStr})},{title:"质损照片",dataIndex:"isQualityDamage",key:"isQualityDamage",width:80,render:(u,f)=>{var g,b;return a.jsx(Ie,{size:"small",children:a.jsx(L,{type:"link",icon:a.jsx(Ke,{}),onClick:()=>Xr(f.id),size:"small",disabled:!((g=f.qualityDamageImgUrlList)!=null&&g.length),children:((b=f.qualityDamageImgUrlList)==null?void 0:b.length)||0})})}},{title:"验车照片",key:"photos",width:100,render:(u,f)=>{var g,b;return a.jsx(Ie,{size:"small",children:a.jsx(L,{type:"link",icon:a.jsx(Ke,{}),onClick:()=>Yr(f.id),size:"small",disabled:!((g=f.inspectionCarDTOS)!=null&&g.length),children:((b=f.inspectionCarDTOS)==null?void 0:b.length)||0})})}},{title:"操作",key:"action",width:100,fixed:"right",render:(u,f)=>a.jsx(L,{type:"link",icon:a.jsx(wi,{}),onClick:()=>Kr(f.id),children:"上传照片"})}],Gr={selectedRowKeys:o,onChange:u=>{l(u)}},bn=()=>{n("/waybill/list")},Kr=u=>{var g;O(u);const f=(g=i==null?void 0:i.carInfo)==null?void 0:g.find(b=>b.id===u);if(It(f),st((f==null?void 0:f.isQualityDamage)||!1),d(!0),U.setFieldsValue({vin:f==null?void 0:f.vin,odometer:f==null?void 0:f.odometer,isQualityDamage:f==null?void 0:f.isQualityDamage,productionDate:f!=null&&f.productionDate?xe(f.productionDate):null}),f!=null&&f.inspectionCarDTOS&&f.inspectionCarDTOS.length>0){const b={};f.inspectionCarDTOS.forEach(D=>{const K=mn.find(Nt=>Nt.value===D.anglePosition);K&&(b[K.name]={uid:D.id||Date.now().toString(),name:`${K.label}.jpg`,status:"done",url:D.fileUrl,anglePosition:D.anglePosition,fileUrl:D.fileUrl})}),T(b)}if(f!=null&&f.qualityDamageImgUrlList&&f.qualityDamageImgUrlList.length>0){const b=f.qualityDamageImgUrlList.map((D,K)=>({uid:`damage_${K}_${Date.now()}`,name:`质损照片_${K+1}.jpg`,status:"done",url:D,fileUrl:D}));ze(b)}},Wr=()=>{Object.values(I).forEach(u=>{u!=null&&u.url&&u.url.startsWith("blob:")&&URL.revokeObjectURL(u.url)}),at.forEach(u=>{u!=null&&u.url&&u.url.startsWith("blob:")&&URL.revokeObjectURL(u.url)}),d(!1),T({}),ze([]),st(!1),It(null),U.resetFields()},qr=async()=>{var u;try{let f=await U.validateFields();if(console.log("...handleSavePhotos",f),Object.keys(I).length===0&&!((u=G==null?void 0:G.inspectionCarDTOS)!=null&&u.length)){m.warning("请至少上传一张验车照片");return}m.loading("正在保存照片...",0),console.log(I,"uploadedPhotos");let g=[];Object.values(I).forEach(D=>{g.push({anglePosition:D.anglePosition,fileUrl:D.fileUrl})});let b=[];Object.values(at).forEach(D=>{b.push(D.fileUrl)}),await pi({carId:h,inspectionCarDTOList:g,vin:f.vin,odometer:f.odometer,tmsWaybillNo:i==null?void 0:i.waybillNo,productionDate:xe(f.productionDate).format("YYYY-MM-DD"),isQualityDamage:f.isQualityDamage?1:0,qualityDamageImgUrlList:b,mileage:f.mileage}),m.destroy(),m.success("成功保存验车信息"),d(!1),T({}),ze([]),st(!1),It(null),U.resetFields(),He()}catch(f){m.destroy(),m.error("保存照片失败"),console.error("保存照片失败:",f)}},Yr=u=>{var g;const f=(g=i==null?void 0:i.carInfo)==null?void 0:g.find(b=>b.id===u);f!=null&&f.inspectionCarDTOS&&f.inspectionCarDTOS.length>0?(lt(f.inspectionCarDTOS),gn("inspection"),ot(!0)):m.info("该车辆暂无验车照片")},Xr=u=>{var g;const f=(g=i==null?void 0:i.carInfo)==null?void 0:g.find(b=>b.id===u);if(f!=null&&f.qualityDamageImgUrlList&&f.qualityDamageImgUrlList.length>0){const b=f.qualityDamageImgUrlList.map((D,K)=>({id:`damage_${K}`,fileUrl:D,anglePosition:"质损照片",createTime:f.createTime||new Date().toISOString()}));lt(b),gn("damage"),ot(!0)}else m.info("该车辆暂无质损照片")},ut=u=>{de(u),k(!0)},Jr=u=>{var f;(f=I[u])!=null&&f.url&&URL.revokeObjectURL(I[u].url),T(g=>{const b={...g};return delete b[u],b}),U.setFieldValue(u,void 0),m.success("照片删除成功")},Qr=()=>{l([]),He()},Zr=()=>{E(!1)},ei=async()=>{try{const u=await ve.validateFields();m.loading("正在提交交车单信息...",0),await new Promise(f=>setTimeout(f,1500)),m.destroy(),m.success(`成功提交 ${u.selectedVins.length} 辆车的交车单信息`),Fe(!1),l([]),ve.resetFields(),He()}catch(u){m.destroy(),u!=null&&u.errorFields?m.error("请填写完整信息"):(m.error("交车单提交失败"),console.error("交车单提交失败:",u))}},ti=()=>{Fe(!1),ve.resetFields()},Rt=async u=>{if(o.length===0){m.warning("请先选择车辆");return}if(u==="createInsurance"){E(!0);return}if(u==="uploadDeliveryDoc"){Fe(!0);return}try{const f={createInsurance:"创建保单",completePickup:"完成提车",vehicleArrival:"车辆到达",startTransport:"开始运输",cancelInsurance:"退保",uploadDeliveryDoc:"上传交车单"};if(u==="cancelInsurance"){Oe.confirm({title:"确认退保操作",content:a.jsxs("div",{children:[a.jsx("p",{children:"请确认是否退保已选的车辆？"}),a.jsxs("p",{style:{color:"#ff4d4f",fontSize:"14px",marginTop:"8px"},children:["⚠️ 已选中 ",a.jsx("strong",{children:o.length})," 辆车，退保后将无法恢复"]})]}),okText:"确认退保",cancelText:"取消",okType:"danger",onOk:async()=>{try{m.loading("正在处理退保操作...",0),await new Promise(g=>setTimeout(g,1500)),m.destroy(),m.success(`成功退保 ${o.length} 辆车`),l([]),He()}catch(g){m.destroy(),m.error("退保操作失败"),console.error("退保操作失败:",g)}}});return}Oe.confirm({title:`确认${f[u]}`,content:`是否对选中的 ${o.length} 辆车执行${f[u]}操作？`,onOk:async()=>{m.success(`${f[u]}操作成功`),l([])}})}catch{m.error("批量操作失败")}},ni=async(u,f,g,b)=>{try{m.loading(`正在上传${g}...`,0);let D=await Mn({currentVehicleId:h,file:u});console.log(D,"upload");const K=URL.createObjectURL(u);T(Nt=>({...Nt,[f]:{uid:Date.now().toString(),name:u.name,status:"done",url:K,originFileObj:u,anglePosition:b,fileUrl:D.result.path}})),U.setFieldValue(f,[{uid:Date.now().toString(),name:u.name,status:"done",url:K}]),m.destroy(),m.success(`${g} 上传成功`)}catch(D){m.destroy(),m.error("照片上传失败"),console.error("照片上传失败:",D)}},ri=async u=>{try{m.loading("正在上传质损照片...",0);const f=URL.createObjectURL(u);let g=await Mn({file:u});const b={uid:Date.now().toString(),name:u.name,status:"done",url:f,originFileObj:u,fileUrl:g.result.path};ze(D=>[...D,b]),m.destroy(),m.success("质损照片上传成功")}catch(f){m.destroy(),m.error("质损照片上传失败"),console.error("质损照片上传失败:",f)}},ii=u=>{const f=at.find(g=>g.uid===u);f!=null&&f.url&&URL.revokeObjectURL(f.url),ze(g=>g.filter(b=>b.uid!==u)),m.success("质损照片删除成功")},si=(u,f,g)=>({name:"file",multiple:!1,accept:"image/*",showUploadList:!1,beforeUpload:b=>b.type.startsWith("image/")?b.size/1024/1024<10?(ni(b,u,f,g),!1):(m.error("图片大小不能超过10MB!"),!1):(m.error("只能上传图片文件!"),!1)});return r?a.jsxs("div",{className:N.loadingContainer,children:[a.jsx(fi,{size:"large"}),a.jsx("div",{style:{marginTop:16},children:"加载中..."})]}):i?a.jsxs("div",{className:N.container,children:[a.jsx("div",{className:N.header,children:a.jsxs(Ie,{children:[a.jsx(L,{icon:a.jsx(Ai,{}),onClick:bn,children:"返回"}),a.jsxs("h2",{children:["运单详情 - ",i.waybillNo]})]})}),a.jsxs(q,{gutter:8,children:[a.jsx(P,{span:15,children:a.jsx(_e,{title:"运单基本信息",className:N.card,children:a.jsxs(p,{column:1,children:[a.jsx(p.Item,{label:"运单号",span:1,children:i.waybillNo}),a.jsx(p.Item,{label:"状态",span:1,children:zr(i.statusDesc)}),a.jsxs(p.Item,{label:"始发地",span:1,children:[i.senderProvince,i.senderCity,i.senderAddress]}),a.jsx(p.Item,{label:"目的地",span:1,children:i.warehouseName}),a.jsx(p.Item,{label:"下单时间",span:1,children:i.inWarehouseTimeStr?xe(i.inWarehouseTimeStr).format("YYYY-MM-DD HH:mm:ss"):"-"}),a.jsx(p.Item,{label:"提车时间",span:1,children:i.pickupTimeStr?xe(i.pickupTimeStr).format("YYYY-MM-DD HH:mm:ss"):"-"})]})})}),a.jsx(P,{span:9,children:a.jsx(_e,{title:"订单宝信息",className:N.card,children:a.jsxs(p,{column:2,children:[a.jsx(p.Item,{label:"订单号",span:1,children:(yn=i==null?void 0:i.orderDTO)==null?void 0:yn.orderNo}),a.jsx(p.Item,{label:"业务经理",span:1,children:(On=i==null?void 0:i.orderDTO)==null?void 0:On.managerName}),a.jsx(p.Item,{label:"经销商",span:1,children:(xn=i==null?void 0:i.orderDTO)==null?void 0:xn.vendorName}),a.jsx(p.Item,{label:"供应商",span:1,children:(jn=i==null?void 0:i.orderDTO)==null?void 0:jn.sellerName})]})})}),a.jsx(P,{span:6,children:a.jsx(_e,{title:"客户信息",className:N.card,children:a.jsxs(p,{column:1,children:[a.jsx(p.Item,{label:"客户名",children:i.customerName}),a.jsx(p.Item,{label:"联系人",children:i.contactPerson}),a.jsx(p.Item,{label:"联系方式",children:i.contactPhone})]})})}),a.jsx(P,{span:9,children:a.jsx(_e,{title:"发车方联系方式",className:N.card,children:a.jsxs(p,{column:1,children:[a.jsx(p.Item,{label:"提车联系人",children:i.pickupContact}),a.jsx(p.Item,{label:"联系方式",children:i.pickupPhone}),a.jsx(p.Item,{label:"提车地址",children:i.pickupAddress})]})})}),a.jsx(P,{span:9,children:a.jsx(_e,{title:"收车方联系方式",className:N.card,children:a.jsxs(p,{column:1,children:[a.jsx(p.Item,{label:"库管",span:1,children:(An=i==null?void 0:i.wmsWarehouseDTO)==null?void 0:An.contactName}),a.jsx(p.Item,{label:"联系方式",children:(Sn=i==null?void 0:i.wmsWarehouseDTO)==null?void 0:Sn.contactPhone}),a.jsxs(p.Item,{label:"交车地址",children:[(wn=i==null?void 0:i.wmsWarehouseDTO)==null?void 0:wn.provinceName,(Pn=i==null?void 0:i.wmsWarehouseDTO)==null?void 0:Pn.cityName,(Cn=i==null?void 0:i.wmsWarehouseDTO)==null?void 0:Cn.address]})]})})}),a.jsx(P,{span:24,children:a.jsx(_e,{title:a.jsxs(Ie,{children:[a.jsx(_i,{}),"车辆信息",a.jsxs(kt,{color:"blue",children:[(En=i==null?void 0:i.orderDTO)==null?void 0:En.carCount," 辆"]})]}),className:N.card,extra:a.jsxs(Ie,{children:[a.jsx(L,{type:"primary",icon:a.jsx(Ei,{}),onClick:()=>Rt("createInsurance"),disabled:o.length===0,children:"创建保单"}),a.jsx(L,{icon:a.jsx(Bt,{}),danger:!0,onClick:()=>Rt("cancelInsurance"),disabled:o.length===0,children:"退保"}),a.jsx(L,{icon:a.jsx(Ti,{}),onClick:()=>Rt("uploadDeliveryDoc"),disabled:o.length===0,children:"上传交车单"})]}),children:a.jsx(Jn,{rowSelection:Gr,columns:Hr,dataSource:i==null?void 0:i.carInfo,rowKey:"id",pagination:!1,scroll:{x:1200},size:"middle"})})})]}),a.jsx(Oe,{title:"上传验车信息",open:c,onCancel:Wr,onOk:qr,okText:"提交",cancelText:"取消",width:1e3,height:600,style:{overflowY:"scroll"},okButtonProps:{disabled:Object.keys(I).length===0},children:a.jsxs(M,{form:U,layout:"inline",requiredMark:!1,children:[a.jsxs(q,{gutter:8,style:{width:"100%"},children:[a.jsx(P,{span:8,children:a.jsx(M.Item,{label:"车型",children:a.jsx(ye,{value:G==null?void 0:G.vehicleName,disabled:!0,style:{background:"#f5f5f5"}})})}),a.jsx(P,{span:8,children:a.jsx(M.Item,{label:"内外饰",children:a.jsx(ye,{value:G==null?void 0:G.outInColor,disabled:!0,style:{background:"#f5f5f5"}})})})]}),a.jsxs(q,{gutter:8,style:{width:"100%"},children:[a.jsx(P,{span:8,children:a.jsx(M.Item,{name:"vin",label:"车架号",rules:[{required:!0,message:"请输入车架号"}],children:a.jsx(ye,{placeholder:"请输入车架号",maxLength:17,defaultValue:G==null?void 0:G.vin})})}),a.jsx(P,{span:8,children:a.jsx(M.Item,{name:"productionDate",label:"生产日期",rules:[{required:!0,message:"请选择生产日期"}],children:a.jsx(Xn,{placeholder:"请选择生产日期",style:{width:"100%"},disabledDate:u=>u&&u>xe().endOf("day")})})}),a.jsx(P,{span:8,children:a.jsx(M.Item,{name:"odometer",label:"公里数(km)",rules:[{required:!0,message:"请输入公里数"}],children:a.jsx(ye,{placeholder:"请输入公里数",maxLength:7,onChange:u=>{const f=u.target.value.replace(/[^\d]/g,"");U.setFieldsValue({odometer:f})}})})})]}),a.jsx(q,{gutter:8,style:{width:"100%"},children:a.jsx(P,{span:24,children:a.jsx(M.Item,{label:"是否质损",labelCol:{span:2},name:"isQualityDamage",children:a.jsxs(Lt.Group,{value:pn,onChange:u=>st(u.target.value),defaultValue:!1,children:[a.jsx(Lt,{value:!1,children:"否"}),a.jsx(Lt,{value:!0,children:"是"})]})})})}),pn&&a.jsx(q,{gutter:8,style:{width:"100%"},children:a.jsx(P,{span:24,children:a.jsxs(M.Item,{label:"质损照片",labelCol:{span:2},children:[a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",alignItems:"flex-start"},children:[at.map(u=>a.jsxs("div",{style:{position:"relative",border:"1px solid #d9d9d9",borderRadius:"6px"},children:[a.jsx("img",{src:u.url,alt:"质损照片",style:{width:"104px",height:"104px",objectFit:"cover",borderRadius:"6px"},onClick:()=>ut(u.url)}),a.jsxs("div",{style:{position:"absolute",top:0,right:0,background:"rgba(0, 0, 0, 0.5)",borderRadius:"0 6px 0 6px",padding:"4px"},children:[a.jsx(L,{type:"text",icon:a.jsx(Ke,{}),size:"small",onClick:()=>ut(u.url),style:{color:"white",padding:"0 4px",marginRight:"2px"}}),a.jsx(L,{type:"text",icon:a.jsx(Bt,{}),size:"small",onClick:()=>ii(u.uid),style:{color:"white",padding:"0 4px"}})]})]},u.uid)),a.jsx(ct,{name:"file",accept:"image/*",showUploadList:!1,beforeUpload:u=>u.type.startsWith("image/")?u.size/1024/1024<10?(ri(u),!1):(m.error("图片大小不能超过10MB!"),!1):(m.error("只能上传图片文件!"),!1),children:a.jsxs("div",{style:{width:"104px",height:"104px",border:"1px dashed #d9d9d9",borderRadius:"6px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",background:"#fafafa"},children:[a.jsx(ft,{style:{fontSize:"20px",color:"#999"}}),a.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"#999"},children:"上传质损照片"})]})})]}),a.jsx("div",{style:{color:"#999",fontSize:"12px",marginTop:"8px"},children:"支持jpg、png格式，单个文件不超过10MB，可上传多张"})]})})}),a.jsx(q,{gutter:8,style:{width:"100%"},children:a.jsx(P,{span:24,children:a.jsx(M.Item,{label:"验车照片",labelCol:{span:2},children:a.jsx("div",{className:N.photoGrid,style:{width:"100%"},children:mn.map((u,f)=>a.jsx("div",{className:N.photoItem,children:a.jsx(M.Item,{name:u.name,rules:[{required:!0,message:`请上传${u.label}`}],children:I[u.name]?a.jsxs("div",{className:N.uploadedPhoto,children:[a.jsx("img",{src:I[u.name].url,alt:u.label,style:{width:"100%",height:"140px",objectFit:"cover",borderRadius:"6px"},onClick:()=>ut(I[u.name].url)}),a.jsxs("div",{className:N.photoActions,children:[a.jsx(L,{type:"text",icon:a.jsx(Ke,{}),onClick:()=>ut(I[u.name].url),style:{color:"white"}}),a.jsx(L,{type:"text",icon:a.jsx(Bt,{}),onClick:()=>Jr(u.name),style:{color:"white"}})]})]}):a.jsx(ct,{...si(u.name,u.label,u.value),listType:"picture-card",maxCount:1,children:a.jsxs("div",{children:[a.jsx(ft,{}),a.jsxs("div",{style:{marginTop:8},children:["点击上传",u.label]})]})})})},u.name))})})})})]})}),a.jsx(Oe,{open:B,title:"照片预览",footer:null,onCancel:()=>k(!1),width:800,children:a.jsx(Rn,{alt:"照片预览",style:{width:"100%"},src:V})}),a.jsx(Va,{visible:x,onCancel:Zr,selectedVehicles:(Dn=i==null?void 0:i.carInfo)==null?void 0:Dn.filter(u=>o.includes(u.id)),onSuccess:Qr,waybillNo:i.waybillNo}),a.jsxs(Oe,{title:"上传交车单",open:he,onCancel:ti,onOk:ei,okText:"提交",cancelText:"取消",width:600,className:N.deliveryDocModal,children:[a.jsx("div",{style:{marginBottom:16},children:a.jsxs("p",{children:["可选车辆数量：",a.jsx("strong",{children:o.length})," 辆"]})}),a.jsxs(M,{form:ve,layout:"inline",requiredMark:!1,children:[a.jsx(M.Item,{name:"selectedVins",label:"关联车架号",rules:[{required:!0,message:"请选择要上传交车单的车架号"}],initialValue:(Tn=i==null?void 0:i.carInfo)==null?void 0:Tn.filter(u=>o.includes(u.id)).map(u=>u.vin),children:a.jsx(mi,{mode:"multiple",placeholder:"请选择车架号",style:{width:"450px"},options:(In=i==null?void 0:i.vehicles)==null?void 0:In.filter(u=>o.includes(u.id)).map(u=>({value:u.vin,label:`${u.vin} (${u.model})`,key:u.id}))})}),a.jsxs(q,{gutter:16,children:[a.jsx(P,{span:24,children:a.jsx(M.Item,{name:"contactPerson",label:"交车联系人",rules:[{required:!0,message:"请输入交车联系人"}],children:a.jsx(ye,{placeholder:"请输入交车联系人"})})}),a.jsx(P,{span:24,children:a.jsx(M.Item,{name:"contactPhone",label:"联系电话",rules:[{required:!0,message:"请输入联系电话"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],children:a.jsx(ye,{placeholder:"请输入联系电话"})})})]}),a.jsx(P,{span:24,children:a.jsx(M.Item,{name:"idCard",label:"身份证号",rules:[{required:!0,message:"请输入身份证号"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号码"}],children:a.jsx(ye,{placeholder:"请输入身份证号码"})})}),a.jsxs(q,{gutter:16,children:[a.jsx(P,{span:24,children:a.jsx(M.Item,{name:"deliveryDocPhoto",label:"交车单",rules:[{required:!0,message:"请上传交车单照片"}],children:a.jsx(ct,{listType:"picture-card",maxCount:1,accept:"image/*",beforeUpload:()=>!1,onChange:({fileList:u})=>{ve.setFieldValue("deliveryDocPhoto",u)},children:a.jsxs("div",{children:[a.jsx(ft,{}),a.jsx("div",{style:{marginTop:8},children:"上传交车单"})]})})})}),a.jsx(P,{span:24,children:a.jsx(M.Item,{name:"personVehiclePhoto",label:"人车照",rules:[{required:!0,message:"请上传人车照"}],children:a.jsx(ct,{listType:"picture-card",maxCount:1,accept:"image/*",beforeUpload:()=>!1,onChange:({fileList:u})=>{ve.setFieldValue("personVehiclePhoto",u)},children:a.jsxs("div",{children:[a.jsx(ft,{}),a.jsx("div",{style:{marginTop:8},children:"上传人车照"})]})})})})]})]})]}),a.jsx(Oe,{title:a.jsxs("div",{children:[a.jsx("span",{children:$r==="inspection"?"验车照片预览":"质损照片预览"}),a.jsxs(kt,{color:"blue",style:{marginLeft:8},children:["共 ",Mt.length," 张"]})]}),open:Ur,onCancel:()=>{ot(!1),lt([])},footer:[a.jsx(L,{onClick:()=>{ot(!1),lt([])},children:"关闭"},"close")],width:1200,className:N.photoViewModal,children:a.jsxs("div",{style:{maxHeight:"70vh",overflowY:"auto"},children:[a.jsx(q,{gutter:[16,16],children:Mt.map((u,f)=>{const g=b=>({1:"左前45度照片",2:"左前门含A柱的照片",3:"左后门的照片",4:"后轮轮毂照片",5:"中控台照片",6:"仪表盘照片",7:"右后45度照片",8:"右前门含A柱的照片",9:"铭牌照片",10:"商品车入库信息采集表",11:"发动机舱"})[b]||b||"未知位置";return a.jsx(P,{xs:24,sm:12,md:8,lg:6,children:a.jsx(_e,{hoverable:!0,cover:a.jsx("div",{style:{height:200,overflow:"hidden"},children:a.jsx(Rn,{alt:g(u.anglePosition),src:"http://120.26.232.36"+u.fileUrl,style:{width:"100%",height:"100%",objectFit:"cover"},preview:{mask:a.jsxs("div",{style:{color:"white",textAlign:"center"},children:[a.jsx(Ke,{style:{fontSize:20}}),a.jsx("div",{style:{marginTop:4},children:"预览"})]})}})}),size:"small",children:a.jsx(_e.Meta,{title:a.jsx("div",{style:{fontSize:"12px",lineHeight:"16px"},children:g(u.anglePosition)})})})},u.id||f)})}),Mt.length===0&&a.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:"#999"},children:"暂无照片"})]})})]}):a.jsxs("div",{className:N.errorContainer,children:[a.jsx("div",{children:"运单详情不存在"}),a.jsx(L,{type:"primary",onClick:bn,style:{marginTop:16},children:"返回列表"})]})};export{ro as default};
