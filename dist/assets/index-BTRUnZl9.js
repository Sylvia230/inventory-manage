import{r,b as $,F as l,j as e,R as k,a as u,I as h,S as q,B as d,M as C,s as p}from"./index-Chixbmna.js";import{S as w}from"./index-CTVR2mE-.js";import{R as D}from"./SearchOutlined-CJakv6Nz.js";import{R as P}from"./ReloadOutlined-DjkM37kN.js";import{F as J}from"./Table-DsHeEN0d.js";import{E as Q}from"./EditOutlined-DdmGLkPL.js";import"./Pagination-Du2F-cir.js";function y(){return y=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var m=arguments[a];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(n[i]=m[i])}return n},y.apply(this,arguments)}const W=(n,a)=>r.createElement($,y({},n,{ref:a,icon:Q})),A=r.forwardRef(W),G="_container_1iukc_1",T={container:G},te=()=>{const[n]=l.useForm(),[a]=l.useForm(),[m,i]=r.useState(!1),[I,x]=r.useState(!1),[v,f]=r.useState(!1),[N,g]=r.useState(!1),[o,c]=r.useState(null),j=[{label:"购车合同",value:"purchase"},{label:"租赁合同",value:"lease"},{label:"服务合同",value:"service"},{label:"其他",value:"other"}],S=[{title:"编号",dataIndex:"templateNo",key:"templateNo",width:180},{title:"名称",dataIndex:"name",key:"name",width:200},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:180},{title:"修改时间",dataIndex:"updateTime",key:"updateTime",width:180},{title:"合同类型",dataIndex:"type",key:"type",width:120,render:t=>{const s=j.find(_=>_.value===t);return s?s.label:t}},{title:"资方合同名称",dataIndex:"fundContractName",key:"fundContractName",width:200},{title:"操作",key:"action",fixed:"right",width:180,render:(t,s)=>e.jsxs("span",{children:[e.jsx(d,{size:"small",type:"link",onClick:()=>F(s),children:"编辑"}),e.jsx(d,{type:"link",size:"small",danger:!0,onClick:()=>M(s),children:"删除"}),e.jsx(d,{size:"small",type:"link",onClick:()=>z(s),children:"设置签章位置"}),e.jsx(d,{size:"small",type:"link",onClick:()=>B(s),children:"校验"})]})}],b=[{key:"1",templateNo:"MB202403150001",name:"标准购车合同模板",createTime:"2024-03-15 10:00:00",updateTime:"2024-03-15 10:00:00",type:"purchase",fundContractName:"上海银行购车合同"},{key:"2",templateNo:"MB202403150002",name:"标准租赁合同模板",createTime:"2024-03-15 11:00:00",updateTime:"2024-03-15 11:00:00",type:"lease",fundContractName:"北京银行租赁合同"}],F=t=>{console.log("编辑模板:",t),c(t),f(!0),setTimeout(()=>{a.setFieldsValue({name:t.name,fundContractName:t.fundContractName,type:t.type})},0)},R=async()=>{try{const t=await a.validateFields();g(!0),console.log("提交编辑数据:",{...t,templateNo:o==null?void 0:o.templateNo}),await new Promise(s=>setTimeout(s,1e3)),p.success("编辑成功"),f(!1),c(null),a.resetFields()}catch(t){console.error("编辑失败:",t),p.error("编辑失败，请重试")}finally{g(!1)}},E=()=>{f(!1),c(null),a.resetFields()},M=t=>{c(t),x(!0)},O=async()=>{try{console.log("删除模板:",o),p.success("删除成功"),x(!1),c(null)}catch(t){console.error("删除失败:",t),p.error("删除失败")}},z=t=>{console.log("设置签章位置:",t)},B=t=>{console.log("校验模板:",t)},V=async()=>{try{const t=await n.validateFields();console.log("搜索条件:",t),i(!0),setTimeout(()=>{i(!1)},1e3)}catch(t){console.error("表单验证失败:",t)}},L=()=>{n.resetFields()};return e.jsxs("div",{className:T.container,children:[e.jsxs(l,{form:n,layout:"inline",className:T.searchForm,children:[e.jsxs(k,{gutter:24,style:{width:"100%"},children:[e.jsx(u,{span:8,children:e.jsx(l.Item,{name:"templateNo",label:"模板编号",children:e.jsx(h,{placeholder:"请输入模板编号"})})}),e.jsx(u,{span:8,children:e.jsx(l.Item,{name:"name",label:"合同模板名称",children:e.jsx(h,{placeholder:"请输入合同模板名称"})})}),e.jsx(u,{span:8,children:e.jsx(l.Item,{name:"type",label:"合同类型",children:e.jsx(w,{placeholder:"请选择合同类型",options:j,allowClear:!0})})})]}),e.jsx(k,{gutter:24,style:{width:"100%"},children:e.jsx(u,{span:8,children:e.jsx(l.Item,{children:e.jsxs(q,{children:[e.jsx(d,{type:"primary",icon:e.jsx(D,{}),onClick:V,children:"搜索"}),e.jsx(d,{icon:e.jsx(P,{}),onClick:L,children:"重置"})]})})})})]}),e.jsx(J,{columns:S,dataSource:b,loading:m,pagination:{total:b.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 条`},scroll:{x:1500}}),e.jsxs(C,{title:"删除确认",open:I,onOk:O,onCancel:()=>{x(!1),c(null)},okText:"确认",cancelText:"取消",okButtonProps:{danger:!0},children:[e.jsx("p",{children:"确定要删除该合同模板吗？"}),o&&e.jsxs("p",{style:{color:"#666",fontSize:"14px"},children:["模板编号：",o.templateNo]})]}),e.jsxs(C,{title:"编辑合同模板",open:v,onOk:R,onCancel:E,width:600,okText:"确定",cancelText:"取消",confirmLoading:N,children:[e.jsxs(l,{form:a,layout:"vertical",style:{marginTop:24},children:[e.jsx(l.Item,{name:"name",label:"合同名称",rules:[{required:!0,message:"请输入合同名称"},{max:20,message:"合同名称不能超过20个字符"}],children:e.jsx(h,{placeholder:"请输入合同名称",maxLength:20,showCount:!0})}),e.jsx(l.Item,{name:"fundContractName",label:"资方合同名称",rules:[{required:!0,message:"请输入资方合同名称"}],children:e.jsx(h,{placeholder:"请输入资方合同名称"})}),e.jsx(l.Item,{name:"type",label:"合同类型",rules:[{required:!0,message:"请选择合同类型"}],children:e.jsx(w,{placeholder:"请选择合同类型",options:j})})]}),o&&e.jsxs("div",{style:{marginTop:16,padding:12,backgroundColor:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:6},children:[e.jsxs("div",{style:{marginBottom:4,color:"#52c41a",fontWeight:"bold"},children:[e.jsx(A,{style:{marginRight:8}}),"正在编辑的模板"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["模板编号：",o.templateNo]})]})]})]})};export{te as default};
