import{F as l,f as W,j as e,M as b,a as u,B as a,I as p,r as n,C as X,R as Y,S as T,d as Z,s as i}from"./index-DM0cs7PH.js";import{s as ee}from"./index.module-CBa0FrbO.js";import{d as te}from"./debounce-CwdeFCaN.js";import{U as le}from"./index-BgwGN7oG.js";import{R as se}from"./UploadOutlined-6Et3PIBF.js";import{F as ae}from"./Table-BWSuwz8m.js";import{S as L}from"./index-CxDwKqh9.js";import{C as ne}from"./index-mdsNCDrj.js";import{T as A}from"./index-eUXfm9MG.js";import"./Pagination-CNDLfD-W.js";const re=({open:j,onCancel:r,onOk:h,loading:m=!1,merchantData:g})=>{const[d]=l.useForm(),[y,c]=W.useState([]),I=async()=>{try{const o=await d.validateFields();h(o)}catch(o){console.error("Validate Failed:",o)}},x=()=>{d.resetFields(),c([]),r()},k={onRemove:o=>{const C=y.indexOf(o),f=y.slice();f.splice(C,1),c(f)},beforeUpload:o=>(c([o]),!1),fileList:y};return e.jsx(b,{title:"商家审核",open:j,onCancel:x,width:600,footer:[e.jsx(a,{onClick:x,children:"驳回"},"reject"),e.jsx(a,{type:"primary",loading:m,onClick:I,children:"通过"},"approve")],children:e.jsxs(l,{form:d,layout:"inline",initialValues:g,children:[e.jsx(u,{span:24,children:e.jsx(l.Item,{label:"公司全称",name:"name",children:"张三"})}),e.jsx(u,{children:e.jsx(l.Item,{label:"公司地址",name:"address",children:"浙江杭州"})}),e.jsx(u,{span:24,children:e.jsx(l.Item,{label:"营业执照",name:"businessLicense",children:e.jsx(le,{...k,listType:"picture",maxCount:1,accept:"image/*",children:e.jsx(a,{icon:e.jsx(se,{}),children:"上传营业执照"})})})}),e.jsx(u,{span:24,children:e.jsx(l.Item,{label:"法人信息",name:"legalPerson",children:"李四"})}),e.jsx(u,{span:24,children:e.jsx(l.Item,{label:"经营范围",name:"businessScope",children:"浙江杭州台州"})}),e.jsx(l.Item,{label:"备注",name:"remark",rules:[{required:!0,message:"请输入备注"}],children:e.jsx(p.TextArea,{rows:4,placeholder:"请输入备注",style:{width:"500px"}})})]})})},fe=()=>{const[j,r]=n.useState(!1),[h]=l.useForm(),[m]=l.useForm(),[g,d]=n.useState(!1),[y,c]=n.useState(!1),[I,x]=n.useState(null),[k,o]=n.useState([]),[C,f]=n.useState(!1),[M,P]=n.useState([]),[B,S]=n.useState(!1),[ie,w]=n.useState(!1),[v,O]=n.useState([{id:"1",name:"测试企业1",creditCode:"91110105MA12345678",legalPerson:"张三",legalPersonId:"110101199001011234",legalSignature:"张三",companySignature:"李四",contactPerson:"王五",businessAddress:"北京市朝阳区xxx街道",creditLevel:"A",creditLimit:1e6,status:"正常"}]),V=[{value:"beijing",label:"北京",children:[{value:"chaoyang",label:"朝阳区",children:[{value:"branch1",label:"朝阳支行"}]}]}],R=t=>{b.confirm({title:"确认加入黑名单",content:`确定要将商家"${t.name}"加入黑名单吗？`,okText:"确认",cancelText:"取消",onOk:async()=>{try{r(!0),O(v.map(s=>s.id===t.id?{...s,status:"黑名单"}:s)),i.success("已加入黑名单")}catch{i.error("操作失败")}finally{r(!1)}}})},q=t=>{x(t),d(!0)},N=t=>{x(t),c(!0)},$=async t=>{try{r(!0),i.success("标签添加成功"),d(!1)}catch{i.error("操作失败")}finally{r(!1)}},D=async t=>{try{r(!0),i.success("银行卡添加成功"),c(!1),m.resetFields()}catch{i.error("操作失败")}finally{r(!1)}},U=async t=>{try{r(!0),console.log("搜索条件：",t)}catch{i.error("搜索失败")}finally{r(!1)}},z=()=>{h.resetFields()},E=t=>{switch(t){case"待审核":return"warning";case"正常":return"success";case"黑名单":return"error";default:return"default"}},J=t=>{switch(t){case"A":return"success";case"B":return"processing";case"C":return"warning";case"D":return"error";default:return"default"}},F=t=>{x(t),S(!0)},K=async t=>{try{w(!0),i.success("审核成功"),S(!1)}catch{i.error("审核失败")}finally{w(!1)}},Q=[{title:"商家名称",dataIndex:"name",key:"name"},{title:"统一社会信用代码",width:160,dataIndex:"creditCode",key:"creditCode"},{title:"法人代表",dataIndex:"legalPerson",key:"legalPerson"},{title:"法人代表身份证",width:160,dataIndex:"legalPersonId",key:"legalPersonId"},{title:"法人签章人",dataIndex:"legalSignature",key:"legalSignature"},{title:"企业签章人",dataIndex:"companySignature",key:"companySignature"},{title:"联系人",dataIndex:"contactPerson",key:"contactPerson"},{title:"经营场所",dataIndex:"businessAddress",key:"businessAddress"},{title:"商家信用等级",dataIndex:"creditLevel",key:"creditLevel",render:t=>e.jsx(A,{color:J(t),children:t})},{title:"服务费日费率",dataIndex:"creditLimit",key:"creditLimit",render:t=>`¥${t.toLocaleString()}`},{title:"状态",dataIndex:"status",key:"status",render:t=>e.jsx(A,{color:E(t),children:t})},{title:"操作",key:"action",fixed:"right",width:"200",render:(t,s)=>e.jsxs("div",{children:[e.jsx(a,{type:"link",onClick:()=>F(s),children:"修改日费率 （弹出输入日费率弹窗 （%））"}),e.jsx(a,{type:"link",onClick:()=>F(s),children:"审核"}),e.jsx(a,{type:"link",onClick:()=>q(s),children:"新增标签"}),s.status!=="黑名单"&&e.jsx(a,{type:"link",onClick:()=>R(s),children:"添加黑名单"}),e.jsx(a,{type:"link",onClick:()=>N(s),children:"添加银行卡"})]})}],_=async t=>{f(!0);try{const s=[{value:"urgent",label:"加急",color:"red"},{value:"vip",label:"VIP客户",color:"gold"},{value:"new",label:"新客户",color:"green"},{value:"special",label:"特殊处理",color:"purple"}].filter(H=>H.label.toLowerCase().includes(t.toLowerCase()));P(s)}catch{i.error("获取标签列表失败")}finally{f(!1)}},G=n.useMemo(()=>te(_,500),[]);return e.jsxs("div",{children:[e.jsx(X,{className:"mb-16",children:e.jsx(l,{form:h,onFinish:U,layout:"inline",children:e.jsxs(Y,{gutter:24,style:{width:"100%"},children:[e.jsx(u,{span:7,children:e.jsx(l.Item,{name:"name",label:"商家名称",children:e.jsx(p,{placeholder:"请输入商家名称",allowClear:!0})})}),e.jsx(u,{span:10,style:{textAlign:"left"},children:e.jsxs(T,{children:[e.jsx(a,{type:"primary",htmlType:"submit",loading:j,children:"查询"}),e.jsx(a,{onClick:z,children:"重置"})]})})]})})}),e.jsx("div",{className:ee.container,children:e.jsx(ae,{columns:Q,dataSource:v,rowKey:"id",loading:j,scroll:{x:1500},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 条`}})}),e.jsx(b,{title:"添加标签",open:g,onOk:$,onCancel:()=>{d(!1),h.resetFields()},okText:"确定",cancelText:"取消",children:e.jsx(l,{form:h,layout:"inline",children:e.jsx(l.Item,{label:"标签",required:!0,tooltip:"请至少选择一个标签",children:e.jsx(L,{style:{width:"280px"},placeholder:"请选择或搜索标签",value:k,onChange:o,onSearch:G,notFoundContent:C?e.jsx(Z,{size:"small"}):null,options:M,optionLabelProp:"label",optionFilterProp:"label",showSearch:!0,allowClear:!0})})})}),e.jsx(b,{title:"添加银行卡",open:y,onCancel:()=>{c(!1),m.resetFields()},footer:null,children:e.jsxs(l,{form:m,onFinish:D,layout:"vertical",children:[e.jsx(l.Item,{name:"accountName",label:"户名",rules:[{required:!0,message:"请输入户名"}],children:e.jsx(p,{placeholder:"请输入户名"})}),e.jsx(l.Item,{name:"bankBranch",label:"开户支行",children:e.jsx(ne,{options:V,placeholder:"请选择开户支行",allowClear:!0})}),e.jsx(l.Item,{name:"accountNumber",label:"账户",rules:[{required:!0,message:"请输入账户"}],children:e.jsx(p,{placeholder:"请输入账户"})}),e.jsx(l.Item,{name:"phone",label:"手机号",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],children:e.jsx(p,{placeholder:"请输入手机号"})}),e.jsx(l.Item,{name:"idType",label:"证件类型",children:e.jsx(L,{placeholder:"请选择证件类型",allowClear:!0,options:[{value:"身份证",label:"身份证"},{value:"护照",label:"护照"},{value:"其他",label:"其他"}]})}),e.jsx(l.Item,{name:"idNumber",label:"证件编号",children:e.jsx(p,{placeholder:"请输入证件编号"})}),e.jsx(l.Item,{children:e.jsxs(T,{style:{width:"100%",justifyContent:"flex-end"},children:[e.jsx(a,{onClick:()=>{c(!1),m.resetFields()},children:"取消"}),e.jsx(a,{type:"primary",htmlType:"submit",loading:j,children:"确定"})]})})]})}),e.jsx(re,{open:B,onCancel:()=>S(!1),onOk:K})]})};export{fe as default};
