import{y as f,F as t,r as a,j as s,R as P,a as i,I as y,S as q,B as c,M as ee,s as p}from"./index-DM0cs7PH.js";import{S as n}from"./index-CxDwKqh9.js";import{R as se}from"./SearchOutlined-oKhf2m42.js";import{R as te}from"./ReloadOutlined-CcA3e1c_.js";import{R as ae}from"./PlusOutlined-D6RCnMyd.js";import{F as le}from"./Table-BWSuwz8m.js";import{T as v}from"./index-eUXfm9MG.js";import"./Pagination-CNDLfD-W.js";const re="_container_agzf4_1",ne={container:re},oe=async o=>f.post("/province/pageQuery",o).then(l=>l.result),ie=async o=>f.post("/city/pageQuery",o).then(l=>l.result),ce=async o=>f.post("/county/pageQuery",o).then(l=>l.result),ve=()=>{const[o]=t.useForm(),[l]=t.useForm(),[w,de]=a.useState(!1),[T,x]=a.useState(!1),[m,V]=a.useState([]),[D,I]=a.useState(""),[d,g]=a.useState([]),[L,C]=a.useState(""),[u,h]=a.useState([]),[M,j]=a.useState(""),[O,b]=a.useState(!1),[B,S]=a.useState(!1),[z,k]=a.useState(!1),E=async()=>{b(!0);try{const e=await oe({});console.log(e,"response"),V(e||[])}catch(e){console.error("获取省份数据失败:",e),p.error("获取省份数据失败")}finally{b(!1)}},Q=async e=>{S(!0);try{const r=await ie({provinceId:e});console.log(r,"cities response"),g(r||[])}catch(r){console.error("获取城市数据失败:",r),p.error("获取城市数据失败")}finally{S(!1)}},_=async e=>{k(!0);try{const r=await ce({cityId:e});console.log(r,"districts response"),h(r||[])}catch(r){console.error("获取区域数据失败:",r),p.error("获取区域数据失败")}finally{k(!1)}},$=e=>{I(e),l.setFieldsValue({city:void 0,district:void 0}),g([]),h([]),e&&Q(e)},J=e=>{C(e),l.setFieldsValue({district:void 0}),h([]),j(""),e&&_(e)},N=e=>{j(e)};a.useEffect(()=>{E()},[]);const F=[{label:"枢纽仓",value:"枢纽仓"},{label:"城市仓",value:"城市仓"},{label:"前置仓",value:"前置仓"}],A=[{label:"正常",value:"正常"},{label:"休眠",value:"休眠"},{label:"关闭",value:"关闭"}],W=[{title:"仓库名称",dataIndex:"name",width:150},{title:"仓库地址",dataIndex:"address",width:200},{title:"仓库类型",dataIndex:"type",width:120,render:e=>s.jsx(v,{color:e==="自营仓库"?"blue":e==="合作仓库"?"green":"orange",children:e})},{title:"仓库状态",dataIndex:"status",width:100,render:e=>s.jsx(v,{color:e==="正常"?"success":e==="维护中"?"warning":"error",children:e})},{title:"仓库服务商",dataIndex:"serviceProvider",width:150},{title:"总车位数",dataIndex:"totalSpaces",width:100},{title:"经纬度",dataIndex:"location",width:150},{title:"是否银行准入",dataIndex:"isBankApproved",width:120,render:e=>s.jsx(v,{color:e?"success":"error",children:e?"是":"否"})},{title:"在库车辆数",dataIndex:"currentVehicles",width:100},{title:"操作",key:"action",fixed:"right",width:120,render:(e,r)=>s.jsxs(q,{size:"middle",children:[s.jsx(c,{type:"link",onClick:()=>K(r),children:"编辑"}),s.jsx(c,{type:"link",onClick:()=>U(r),children:"查看"})]})}],[R]=a.useState([{key:"1",name:"上海中心仓库",address:"上海市浦东新区张江高科技园区",type:"自营仓库",status:"正常",serviceProvider:"上海仓储服务有限公司",totalSpaces:500,location:"121.4737, 31.2304",isBankApproved:!0,currentVehicles:320},{key:"2",name:"北京分仓",address:"北京市海淀区中关村科技园",type:"合作仓库",status:"维护中",serviceProvider:"北京物流有限公司",totalSpaces:300,location:"116.4074, 39.9042",isBankApproved:!1,currentVehicles:150}]),G=e=>{console.log("搜索条件:",e)},H=()=>{o.resetFields()},K=e=>{console.log("编辑仓库:",e)},U=e=>{console.log("查看仓库详情:",e)},X=()=>{x(!0)},Y=()=>{x(!1),l.resetFields(),I(""),C(""),j(""),g([]),h([])},Z=async()=>{try{const e=await l.validateFields();console.log("新增仓库:",e),p.success("新增仓库成功"),x(!1),l.resetFields()}catch(e){console.error("表单验证失败:",e)}};return s.jsxs("div",{className:ne.container,children:[s.jsxs(t,{form:o,onFinish:G,layout:"inline",children:[s.jsxs(P,{gutter:24,style:{width:"100%"},children:[s.jsx(i,{span:8,children:s.jsx(t.Item,{name:"name",label:"仓库名称",children:s.jsx(y,{placeholder:"请输入仓库名称",allowClear:!0})})}),s.jsx(i,{span:8,children:s.jsx(t.Item,{name:"type",label:"仓库类型",children:s.jsx(n,{placeholder:"请选择仓库类型",allowClear:!0,options:F})})}),s.jsx(i,{span:8,children:s.jsx(t.Item,{name:"status",label:"仓库状态",children:s.jsx(n,{placeholder:"请选择仓库状态",allowClear:!0,options:A})})})]}),s.jsx(P,{style:{width:"100%"},children:s.jsx(i,{span:24,children:s.jsxs(q,{children:[s.jsx(c,{icon:s.jsx(se,{}),type:"primary",htmlType:"submit",loading:w,children:"查询"}),s.jsx(c,{icon:s.jsx(te,{}),onClick:H,children:"重置"}),s.jsx(c,{type:"primary",icon:s.jsx(ae,{}),onClick:X,children:"新增仓库"})]})})})]}),s.jsx(le,{columns:W,dataSource:R,loading:w,pagination:{total:R.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条`},scroll:{x:1500}}),s.jsx(ee,{title:"新增仓库",open:T,onOk:Z,onCancel:Y,width:600,okText:"确认",cancelText:"取消",children:s.jsxs(t,{form:l,layout:"inline",requiredMark:!1,children:[s.jsx(i,{span:24,children:s.jsx(t.Item,{name:"name",label:"仓库名称",rules:[{required:!0,message:"请输入仓库名称"}],children:s.jsx(y,{placeholder:"请输入仓库名称"})})}),s.jsxs(i,{span:24,children:[s.jsx(t.Item,{name:"province",label:"省份",rules:[{required:!0,message:"请选择省份"}],children:s.jsx(n,{placeholder:"请选择省份",loading:O,onChange:$,allowClear:!0,value:D,children:m==null?void 0:m.map(e=>s.jsx(n.Option,{value:e.id,children:e.name},e.id))})}),s.jsx(t.Item,{name:"city",label:"城市",rules:[{required:!0,message:"请选择城市"}],children:s.jsx(n,{placeholder:"请选择城市",loading:B,onChange:J,allowClear:!0,disabled:d.length===0,value:L,children:d==null?void 0:d.map(e=>s.jsx(n.Option,{value:e.id||e.value,children:e.name||e.label},e.id||e.value))})}),s.jsx(t.Item,{name:"district",label:"区域",rules:[{required:!0,message:"请选择区域"}],children:s.jsx(n,{placeholder:"请选择区域",loading:z,onChange:N,allowClear:!0,disabled:u.length===0,value:M,children:u==null?void 0:u.map(e=>s.jsx(n.Option,{value:e.id||e.value,children:e.name||e.label},e.id||e.value))})}),s.jsx(t.Item,{name:"address",label:"详细地址",rules:[{required:!0,message:"请输入详细地址"}],children:s.jsx(y.TextArea,{placeholder:"请输入详细地址",rows:3})})]}),s.jsx(i,{span:24,children:s.jsx(t.Item,{name:"type",label:"仓库类型",rules:[{required:!0,message:"请选择仓库类型"}],children:s.jsx(n,{placeholder:"请选择仓库类型",options:F})})}),s.jsx(i,{span:24,children:s.jsx(t.Item,{name:"status",label:"仓库状态",rules:[{required:!0,message:"请选择仓库状态"}],initialValue:"正常",children:s.jsx(n,{placeholder:"请选择仓库状态",options:A})})})]})})]})};export{ve as default};
