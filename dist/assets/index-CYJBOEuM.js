import{F as i,r as d,j as e,M as C,I as v,C as w,S,B as f,s as j}from"./index-D8ReppmJ.js";import{S as b}from"./index-D5ba-O3m.js";import{T as y}from"./index-Z9mwPz8s.js";import{G as V}from"./vehicle-Dz9_Z1-o.js";import{R as O}from"./SearchOutlined-BvVBc35E.js";import{R as B}from"./PlusOutlined-8DBRHyq7.js";import{F as M}from"./Table-uXQ28xlW.js";import"./Pagination-DkTh5KJv.js";const{Option:G}=b,F=[{label:"奥迪",value:"audi"},{label:"宝马",value:"bmw"},{label:"奔驰",value:"benz"},{label:"大众",value:"volkswagen"},{label:"丰田",value:"toyota"},{label:"本田",value:"honda"}],g=[{label:"轿车",value:"sedan"},{label:"SUV",value:"suv"},{label:"MPV",value:"mpv"},{label:"跑车",value:"sports"},{label:"皮卡",value:"pickup"}],q=({visible:m,onCancel:t,onOk:h,loading:x=!1})=>{const[n]=i.useForm(),[l,c]=d.useState(!1),[r,u]=d.useState(""),o=async()=>{try{const a=await n.validateFields();h(a)}catch{}},P=()=>{n.resetFields(),c(!1),u(""),t()},N=a=>{console.log("...value",a),c(a==="new")},I=()=>{r&&(n.setFieldsValue({brand:r}),c(!1),u(""))};return e.jsx(C,{title:"新增车型",open:m,onOk:o,onCancel:P,confirmLoading:x,destroyOnClose:!0,width:600,children:e.jsxs(i,{form:n,layout:"vertical",requiredMark:!1,children:[e.jsx(i.Item,{name:"brand",label:"品牌",rules:[{required:!0,message:"请选择或输入品牌"}],children:l?e.jsx(v,{placeholder:"请输入品牌名称",value:r,onChange:a=>u(a.target.value),onBlur:I,onPressEnter:I,autoFocus:!0}):e.jsx(b,{placeholder:"请选择或输入品牌",onChange:N,dropdownRender:a=>e.jsxs(e.Fragment,{children:[a,e.jsx(b.Option,{value:"new",style:{borderTop:"1px solid #e8e8e8"},children:"+ 新增品牌"})]}),children:F.map(a=>e.jsx(G,{value:a.value,children:a.label},a.value))})}),e.jsx(i.Item,{name:"model",label:"车型",rules:[{required:!0,message:"请选择车型"}],children:e.jsx(b,{placeholder:"请选择车型",children:g.map(a=>e.jsx(G,{value:a.value,children:a.label},a.value))})}),e.jsx(i.Item,{name:"series",label:"车系",rules:[{required:!0,message:"请输入车系"}],children:e.jsx(v,{placeholder:"请输入车系"})}),e.jsx(i.Item,{name:"specification",label:"车规",rules:[{required:!0,message:"请输入车规"}],children:e.jsx(b,{placeholder:"请选择车规",children:g.map(a=>e.jsx(G,{value:a.value,children:a.label},a.value))})}),e.jsx(i.Item,{name:"maxGuidePrice",label:"最高指导价",rules:[{required:!0,message:"请输入指导价"}],children:e.jsx(y,{style:{width:"100%"},placeholder:"请输入指导价",min:0,precision:2,formatter:a=>`¥ ${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),e.jsx(i.Item,{name:"miniGuidePrice",label:"最低指导价",rules:[{required:!0,message:"请输入指导价"}],children:e.jsx(y,{style:{width:"100%"},placeholder:"请输入指导价",min:0,precision:2,formatter:a=>`¥ ${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})})},E=({visible:m,onCancel:t,onOk:h,loading:x,initialValues:n})=>{const[l]=i.useForm(),c=async()=>{try{const r=await l.validateFields();h(r)}catch{}};return e.jsx(C,{title:"编辑指导价",open:m,onCancel:t,onOk:c,confirmLoading:x,destroyOnClose:!0,width:360,children:e.jsxs(i,{form:l,layout:"inline",initialValues:n,children:[e.jsx(i.Item,{name:"miniGuidePrice",label:"最低指导价",rules:[{required:!0,message:"请输入最低指导价"},{type:"number",min:0,message:"价格必须大于0"}],children:e.jsx(y,{style:{width:"100%"},formatter:r=>`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r.replace(/\¥\s?|(,*)/g,""),placeholder:"请输入最低指导价"})}),e.jsx(i.Item,{name:"maxGuidePrice",label:"最高指导价",rules:[{required:!0,message:"请输入最高指导价"},{type:"number",min:0,message:"价格必须大于0"},({getFieldValue:r})=>({validator(u,o){return!o||!r("miniGuidePrice")||o>=r("miniGuidePrice")?Promise.resolve():Promise.reject(new Error("最高指导价必须大于最低指导价"))}})],children:e.jsx(y,{style:{width:"100%"},formatter:r=>`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r.replace(/\¥\s?|(,*)/g,""),placeholder:"请输入最高指导价"})})]})})},A=()=>{const[m,t]=d.useState(!1),[h,x]=d.useState([]),[n,l]=d.useState(!1),[c,r]=d.useState(!1),[u,o]=d.useState(null);d.useState(()=>{x([{admittanceCarId:"4080",seriesId:"594",seriesName:"埃尔法",brandId:"41",brandName:"丰田",standard:2,standardName:["中规"],miniGuidePrice:9,maxGuidePrice:16,status:1},{admittanceCarId:"4079",seriesId:"10149",seriesName:"金刚炮",brandId:"25",brandName:"长城",standard:1,standardName:["国产"],miniGuidePrice:0,maxGuidePrice:0,status:0},{admittanceCarId:"4078",seriesId:"5687",seriesName:"长安欧尚科尚",brandId:"24",brandName:"长安欧尚",standard:2,standardName:["中规"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4077",seriesId:"9936",seriesName:"猎人",brandId:"410",brandName:"瓦滋",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:"0",maxGuidePrice:"0",status:1},{admittanceCarId:"4076",seriesId:"2329",seriesName:"福特F150(猛禽)",brandId:"44",brandName:"福特",standard:92,standardName:["美规","加规","中东","墨西哥版"],miniGuidePrice:"80",maxGuidePrice:"111.2",status:1},{admittanceCarId:"4075",seriesId:"9922",seriesName:"Chiron赤龙",brandId:"21",brandName:"布加迪",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4074",seriesId:"2477",seriesName:"巴博斯-迈巴赫S级",brandId:"5",brandName:"博速",standard:32,standardName:["欧规"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4073",seriesId:"2328",seriesName:"奥迪Q5",brandId:"4",brandName:"奥迪",standard:108,standardName:["美规","加规","欧规","墨西哥版"],miniGuidePrice:"12",maxGuidePrice:"24.22",status:1},{admittanceCarId:"4071",seriesId:"2476",seriesName:"AC X5",brandId:"149",brandName:"AC Schnitzer",standard:4,standardName:["美规"],miniGuidePrice:"9",maxGuidePrice:"4",status:1},{admittanceCarId:"4070",seriesId:"9921",seriesName:"博速 G级4x4",brandId:"5",brandName:"博速",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:"10.8",maxGuidePrice:"11.7",status:1}])});const P=async()=>{const s=await V({});console.log("..res",s)};d.useEffect(()=>{P()},[]);const N=async s=>{try{t(!0),j.success("新增车型成功"),l(!1)}catch{j.error("新增车型失败")}finally{t(!1)}},I=async s=>{try{t(!0),j.success("编辑指导价成功"),r(!1)}catch{j.error("编辑指导价失败")}finally{t(!1)}},a=[{title:"品牌",dataIndex:"brandName",key:"brandName"},{title:"车系",dataIndex:"seriesName",key:"seriesName"},{title:"车型",width:120,dataIndex:"model",key:"model"},{title:"车规",width:120,dataIndex:"standardName",key:"standardName",render:(s,p)=>(console.log("..value",s),(s==null?void 0:s.length)&&s.map(k=>e.jsx("div",{children:k})))},{title:"最高指导价",dataIndex:"maxGuidePrice",key:"maxGuidePrice"},{title:"最低指导价",dataIndex:"miniGuidePrice",key:"miniGuidePrice"},{title:"状态",dataIndex:"status",key:"status",render:s=>e.jsx("span",{style:{color:s==="active"?"#52c41a":"#ff4d4f"},children:s==="active"?"已启用":"已禁用"})},{title:"操作",key:"action",fixed:"right",width:120,render:(s,p)=>e.jsxs("span",{children:[e.jsx(f,{type:"link",onClick:()=>{o(p),r(!0)},children:"编辑指导价"}),e.jsx(f,{type:"link",danger:!0,children:p.status==="active"?"禁用":"启用"})]})}];return e.jsxs("div",{children:[e.jsxs(w,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsxs(S,{children:[e.jsx(v,{placeholder:"请输入品牌/车系/车型",prefix:e.jsx(O,{}),style:{width:300}}),e.jsx(f,{type:"primary",children:"搜索"})]}),e.jsx(f,{type:"primary",icon:e.jsx(B,{}),onClick:()=>l(!0),children:"新增车型"})]}),e.jsx(M,{columns:a,dataSource:h,loading:m,rowKey:"id",pagination:{total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:s=>`共 ${s} 条`}})]}),e.jsx(q,{visible:n,onCancel:()=>l(!1),onOk:N,loading:m}),e.jsx(E,{visible:c,onCancel:()=>{r(!1),o(null)},onOk:I,loading:m,initialValues:u?{miniGuidePrice:u.miniGuidePrice,maxGuidePrice:u.maxGuidePrice}:void 0})]})},J=()=>e.jsx(w,{children:e.jsx(A,{})});export{J as default};
