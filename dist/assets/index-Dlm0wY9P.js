import{e as $,_ as ue,f as L,g as V,h as xe,K as re,i as F,k as ye,l as Pe,t as ve,m as $e,w as je,p as Ie,n as Ne,o as Se,r as k,q as we,v as _e,x as Ee,z as R,A as ke,E as Be,H as Ae,J as Oe,L as Re,N as Me,P as Ke,Q as se,U as Te,V as le,b as ge,c as Ve,u as Le,F as H,j as r,C as X,I as ce,a as De,S as He,B as de,s as J,T as fe}from"./index-DRPHcA5R.js";import{D as W}from"./index-CkJG2kDK.js";import{U as Ge,T as pe}from"./index-AOd8l3FX.js";import{F as ze}from"./Table-CLghJ34T.js";import{D as Fe}from"./index-BTE1MxX-.js";import{I as me}from"./index-BjENZz-U.js";import"./styleChecker-VBj3MALj.js";var be=$.forwardRef(function(t,e){var s=t.prefixCls,n=t.forceRender,g=t.className,f=t.style,x=t.children,v=t.isActive,C=t.role,j=t.classNames,S=t.styles,y=$.useState(v||n),I=ue(y,2),d=I[0],b=I[1];return $.useEffect(function(){(n||v)&&b(!0)},[n,v]),d?$.createElement("div",{ref:e,className:L("".concat(s,"-content"),V(V({},"".concat(s,"-content-active"),v),"".concat(s,"-content-inactive"),!v),g),style:f,role:C},$.createElement("div",{className:L("".concat(s,"-content-box"),j==null?void 0:j.body),style:S==null?void 0:S.body},x)):null});be.displayName="PanelContent";var qe=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],Ce=$.forwardRef(function(t,e){var s=t.showArrow,n=s===void 0?!0:s,g=t.headerClass,f=t.isActive,x=t.onItemClick,v=t.forceRender,C=t.className,j=t.classNames,S=j===void 0?{}:j,y=t.styles,I=y===void 0?{}:y,d=t.prefixCls,b=t.collapsible,N=t.accordion,w=t.panelKey,P=t.extra,i=t.header,a=t.expandIcon,o=t.openMotion,l=t.destroyInactivePanel,c=t.children,p=xe(t,qe),u=b==="disabled",h=P!=null&&typeof P!="boolean",m=V(V(V({onClick:function(){x==null||x(w)},onKeyDown:function(A){(A.key==="Enter"||A.keyCode===re.ENTER||A.which===re.ENTER)&&(x==null||x(w))},role:N?"tab":"button"},"aria-expanded",f),"aria-disabled",u),"tabIndex",u?-1:0),_=typeof a=="function"?a(t):$.createElement("i",{className:"arrow"}),K=_&&$.createElement("div",F({className:"".concat(d,"-expand-icon")},["header","icon"].includes(b)?m:{}),_),G=L("".concat(d,"-item"),V(V({},"".concat(d,"-item-active"),f),"".concat(d,"-item-disabled"),u),C),z=L(g,"".concat(d,"-header"),V({},"".concat(d,"-collapsible-").concat(b),!!b),S.header),B=ye({className:z,style:I.header},["header","icon"].includes(b)?{}:m);return $.createElement("div",F({},p,{ref:e,className:G}),$.createElement("div",B,n&&K,$.createElement("span",F({className:"".concat(d,"-header-text")},b==="header"?m:{}),i),h&&$.createElement("div",{className:"".concat(d,"-extra")},P)),$.createElement(Pe,F({visible:f,leavedClassName:"".concat(d,"-content-hidden")},o,{forceRender:v,removeOnLeave:l}),function(E,A){var T=E.className,M=E.style;return $.createElement(be,{ref:A,prefixCls:d,className:T,classNames:S,style:M,styles:I,isActive:f,forceRender:v,role:N?"tabpanel":void 0},c)}))}),Ue=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],We=function(e,s){var n=s.prefixCls,g=s.accordion,f=s.collapsible,x=s.destroyInactivePanel,v=s.onItemClick,C=s.activeKey,j=s.openMotion,S=s.expandIcon;return e.map(function(y,I){var d=y.children,b=y.label,N=y.key,w=y.collapsible,P=y.onItemClick,i=y.destroyInactivePanel,a=xe(y,Ue),o=String(N??I),l=w??f,c=i??x,p=function(m){l!=="disabled"&&(v(m),P==null||P(m))},u=!1;return g?u=C[0]===o:u=C.indexOf(o)>-1,$.createElement(Ce,F({},a,{prefixCls:n,key:o,panelKey:o,isActive:u,accordion:g,openMotion:j,expandIcon:S,header:b,collapsible:l,onItemClick:p,destroyInactivePanel:c}),d)})},Xe=function(e,s,n){if(!e)return null;var g=n.prefixCls,f=n.accordion,x=n.collapsible,v=n.destroyInactivePanel,C=n.onItemClick,j=n.activeKey,S=n.openMotion,y=n.expandIcon,I=e.key||String(s),d=e.props,b=d.header,N=d.headerClass,w=d.destroyInactivePanel,P=d.collapsible,i=d.onItemClick,a=!1;f?a=j[0]===I:a=j.indexOf(I)>-1;var o=P??x,l=function(u){o!=="disabled"&&(C(u),i==null||i(u))},c={key:I,panelKey:I,header:b,headerClass:N,isActive:a,prefixCls:g,destroyInactivePanel:w??v,openMotion:S,accordion:f,children:e.props.children,onItemClick:l,expandIcon:y,collapsible:o};return typeof e.type=="string"?e:(Object.keys(c).forEach(function(p){typeof c[p]>"u"&&delete c[p]}),$.cloneElement(e,c))};function Je(t,e,s){return Array.isArray(t)?We(t,s):ve(e).map(function(n,g){return Xe(n,g,s)})}function Qe(t){var e=t;if(!Array.isArray(e)){var s=Ne(e);e=s==="number"||s==="string"?[e]:[]}return e.map(function(n){return String(n)})}var Ye=$.forwardRef(function(t,e){var s=t.prefixCls,n=s===void 0?"rc-collapse":s,g=t.destroyInactivePanel,f=g===void 0?!1:g,x=t.style,v=t.accordion,C=t.className,j=t.children,S=t.collapsible,y=t.openMotion,I=t.expandIcon,d=t.activeKey,b=t.defaultActiveKey,N=t.onChange,w=t.items,P=L(n,C),i=$e([],{value:d,onChange:function(h){return N==null?void 0:N(h)},defaultValue:b,postState:Qe}),a=ue(i,2),o=a[0],l=a[1],c=function(h){return l(function(){if(v)return o[0]===h?[]:[h];var m=o.indexOf(h),_=m>-1;return _?o.filter(function(K){return K!==h}):[].concat(Se(o),[h])})};je(!j,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var p=Je(w,j,{prefixCls:n,accordion:v,openMotion:y,expandIcon:I,collapsible:S,destroyInactivePanel:f,onItemClick:c,activeKey:o});return $.createElement("div",F({ref:e,className:P,style:x,role:v?"tablist":void 0},Ie(t,{aria:!0,data:!0})),p)});const Z=Object.assign(Ye,{Panel:Ce});Z.Panel;const Ze=k.forwardRef((t,e)=>{const{getPrefixCls:s}=k.useContext(we),{prefixCls:n,className:g,showArrow:f=!0}=t,x=s("collapse",n),v=L({[`${x}-no-arrow`]:!f},g);return k.createElement(Z.Panel,Object.assign({ref:e},t,{prefixCls:x,className:v}))}),et=t=>{const{componentCls:e,contentBg:s,padding:n,headerBg:g,headerPadding:f,collapseHeaderPaddingSM:x,collapseHeaderPaddingLG:v,collapsePanelBorderRadius:C,lineWidth:j,lineType:S,colorBorder:y,colorText:I,colorTextHeading:d,colorTextDisabled:b,fontSizeLG:N,lineHeight:w,lineHeightLG:P,marginSM:i,paddingSM:a,paddingLG:o,paddingXS:l,motionDurationSlow:c,fontSizeIcon:p,contentPadding:u,fontHeight:h,fontHeightLG:m}=t,_=`${R(j)} ${S} ${y}`;return{[e]:Object.assign(Object.assign({},Be(t)),{backgroundColor:g,border:_,borderRadius:C,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:_,"&:first-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`${R(C)} ${R(C)} 0 0`}},"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${R(C)} ${R(C)}`}},[`> ${e}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:f,color:d,lineHeight:w,cursor:"pointer",transition:`all ${c}, visibility 0s`},Ae(t)),{[`> ${e}-header-text`]:{flex:"auto"},[`${e}-expand-icon`]:{height:h,display:"flex",alignItems:"center",paddingInlineEnd:i},[`${e}-arrow`]:Object.assign(Object.assign({},Oe()),{fontSize:p,transition:`transform ${c}`,svg:{transition:`transform ${c}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}}),[`${e}-collapsible-header`]:{cursor:"default",[`${e}-header-text`]:{flex:"none",cursor:"pointer"}},[`${e}-collapsible-icon`]:{cursor:"unset",[`${e}-expand-icon`]:{cursor:"pointer"}}},[`${e}-content`]:{color:I,backgroundColor:s,borderTop:_,[`& > ${e}-content-box`]:{padding:u},"&-hidden":{display:"none"}},"&-small":{[`> ${e}-item`]:{[`> ${e}-header`]:{padding:x,paddingInlineStart:l,[`> ${e}-expand-icon`]:{marginInlineStart:t.calc(a).sub(l).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:a}}},"&-large":{[`> ${e}-item`]:{fontSize:N,lineHeight:P,[`> ${e}-header`]:{padding:v,paddingInlineStart:n,[`> ${e}-expand-icon`]:{height:m,marginInlineStart:t.calc(o).sub(n).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:o}}},[`${e}-item:last-child`]:{borderBottom:0,[`> ${e}-content`]:{borderRadius:`0 0 ${R(C)} ${R(C)}`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:b,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:i}}}}})}},tt=t=>{const{componentCls:e}=t,s=`> ${e}-item > ${e}-header ${e}-arrow`;return{[`${e}-rtl`]:{[s]:{transform:"rotate(180deg)"}}}},it=t=>{const{componentCls:e,headerBg:s,borderlessContentPadding:n,borderlessContentBg:g,colorBorder:f}=t;return{[`${e}-borderless`]:{backgroundColor:s,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${f}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:g,borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{padding:n}}}},nt=t=>{const{componentCls:e,paddingSM:s}=t;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:s}}}}}},at=t=>({headerPadding:`${t.paddingSM}px ${t.padding}px`,headerBg:t.colorFillAlter,contentPadding:`${t.padding}px 16px`,contentBg:t.colorBgContainer,borderlessContentPadding:`${t.paddingXXS}px 16px ${t.padding}px`,borderlessContentBg:"transparent"}),ot=_e("Collapse",t=>{const e=Ee(t,{collapseHeaderPaddingSM:`${R(t.paddingXS)} ${R(t.paddingSM)}`,collapseHeaderPaddingLG:`${R(t.padding)} ${R(t.paddingLG)}`,collapsePanelBorderRadius:t.borderRadiusLG});return[et(e),it(e),nt(e),tt(e),ke(e)]},at),rt=k.forwardRef((t,e)=>{const{getPrefixCls:s,direction:n,expandIcon:g,className:f,style:x}=Re("collapse"),{prefixCls:v,className:C,rootClassName:j,style:S,bordered:y=!0,ghost:I,size:d,expandIconPosition:b="start",children:N,destroyInactivePanel:w,destroyOnHidden:P,expandIcon:i}=t,a=Me(B=>{var E;return(E=d??B)!==null&&E!==void 0?E:"middle"}),o=s("collapse",v),l=s(),[c,p,u]=ot(o),h=k.useMemo(()=>b==="left"?"start":b==="right"?"end":b,[b]),m=i??g,_=k.useCallback((B={})=>{const E=typeof m=="function"?m(B):k.createElement(Ke,{rotate:B.isActive?n==="rtl"?-90:90:void 0,"aria-label":B.isActive?"expanded":"collapsed"});return se(E,()=>{var A;return{className:L((A=E==null?void 0:E.props)===null||A===void 0?void 0:A.className,`${o}-arrow`)}})},[m,o]),K=L(`${o}-icon-position-${h}`,{[`${o}-borderless`]:!y,[`${o}-rtl`]:n==="rtl",[`${o}-ghost`]:!!I,[`${o}-${a}`]:a!=="middle"},f,C,j,p,u),G=Object.assign(Object.assign({},Te(l)),{motionAppear:!1,leavedClassName:`${o}-content-hidden`}),z=k.useMemo(()=>N?ve(N).map((B,E)=>{var A,T;const M=B.props;if(M!=null&&M.disabled){const q=(A=B.key)!==null&&A!==void 0?A:String(E),U=Object.assign(Object.assign({},le(B.props,["disabled"])),{key:q,collapsible:(T=M.collapsible)!==null&&T!==void 0?T:"disabled"});return se(B,U)}return B}):null,[N]);return c(k.createElement(Z,Object.assign({ref:e,openMotion:G},le(t,["rootClassName"]),{expandIcon:_,prefixCls:o,className:K,style:Object.assign(Object.assign({},x),S),destroyInactivePanel:P??w}),z))}),st=Object.assign(rt,{Panel:Ze});function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Q.apply(this,arguments)}const lt=(t,e)=>k.createElement(ge,Q({},t,{ref:e,icon:Fe})),ct=k.forwardRef(lt);function Y(){return Y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Y.apply(this,arguments)}const dt=(t,e)=>k.createElement(ge,Y({},t,{ref:e,icon:Ge})),pt=k.forwardRef(dt),mt="_priceCheckDetail_a9t4r_1",ht="_brandCard_a9t4r_4",ut="_seriesCard_a9t4r_35",xt="_modelSection_a9t4r_50",vt="_modelHeader_a9t4r_53",gt="_modelPrice_a9t4r_68",ft="_vehiclesList_a9t4r_73",bt="_vehicleCard_a9t4r_78",Ct="_vehiclePhotos_a9t4r_94",yt="_photoGrid_a9t4r_99",Pt="_photoItem_a9t4r_105",$t="_photoDescription_a9t4r_116",O={priceCheckDetail:mt,brandCard:ht,seriesCard:ut,modelSection:xt,modelHeader:vt,modelPrice:gt,vehiclesList:ft,vehicleCard:bt,vehiclePhotos:Ct,photoGrid:yt,photoItem:Pt,photoDescription:$t},{TabPane:he}=fe,{Panel:kt}=st,Bt=()=>{const{id:t}=Ve(),e=Le(),[s]=H.useForm(),[n,g]=k.useState(null),[f,x]=k.useState(!1),[v,C]=k.useState({});k.useEffect(()=>{t&&(async()=>{x(!0);try{g({id:t||"",year:2020,status:"待核价",brands:[{id:"brand1",name:"Toyota 丰田",logo:"https://via.placeholder.com/60x40?text=TOYOTA",series:[{id:"series1",name:"Camry 凯美瑞",models:[{id:"model1",name:"2.5L 豪华版",guidePrice:2e5,vehicles:[{id:"v1",vin:"LVGBE40K8GP123456",licensePlate:"粤B12345",mileage:5e4,color:"白色",inspectionPhotos:[{id:"ip1",url:"https://via.placeholder.com/300x200?text=前脸",description:"前脸照片"},{id:"ip2",url:"https://via.placeholder.com/300x200?text=侧面",description:"侧面照片"},{id:"ip3",url:"https://via.placeholder.com/300x200?text=后部",description:"后部照片"},{id:"ip4",url:"https://via.placeholder.com/300x200?text=内饰",description:"内饰照片"}],documentPhotos:[{id:"dp1",url:"https://via.placeholder.com/300x200?text=行驶证正面",description:"行驶证正面"},{id:"dp2",url:"https://via.placeholder.com/300x200?text=行驶证背面",description:"行驶证背面"},{id:"dp3",url:"https://via.placeholder.com/300x200?text=登记证",description:"车辆登记证"}]},{id:"v2",vin:"LVGBE40K8GP123457",licensePlate:"粤B12346",mileage:45e3,color:"黑色",inspectionPhotos:[{id:"ip5",url:"https://via.placeholder.com/300x200?text=前脸",description:"前脸照片"},{id:"ip6",url:"https://via.placeholder.com/300x200?text=侧面",description:"侧面照片"},{id:"ip7",url:"https://via.placeholder.com/300x200?text=后部",description:"后部照片"},{id:"ip8",url:"https://via.placeholder.com/300x200?text=内饰",description:"内饰照片"}],documentPhotos:[{id:"dp4",url:"https://via.placeholder.com/300x200?text=行驶证正面",description:"行驶证正面"},{id:"dp5",url:"https://via.placeholder.com/300x200?text=行驶证背面",description:"行驶证背面"},{id:"dp6",url:"https://via.placeholder.com/300x200?text=登记证",description:"车辆登记证"}]}]},{id:"model2",name:"2.5L 运动版",guidePrice:22e4,vehicles:[{id:"v3",vin:"LVGBE40K8GP123458",licensePlate:"粤B12347",mileage:3e4,color:"红色",inspectionPhotos:[{id:"ip9",url:"https://via.placeholder.com/300x200?text=前脸",description:"前脸照片"},{id:"ip10",url:"https://via.placeholder.com/300x200?text=侧面",description:"侧面照片"},{id:"ip11",url:"https://via.placeholder.com/300x200?text=后部",description:"后部照片"},{id:"ip12",url:"https://via.placeholder.com/300x200?text=内饰",description:"内饰照片"}],documentPhotos:[{id:"dp7",url:"https://via.placeholder.com/300x200?text=行驶证正面",description:"行驶证正面"},{id:"dp8",url:"https://via.placeholder.com/300x200?text=行驶证背面",description:"行驶证背面"},{id:"dp9",url:"https://via.placeholder.com/300x200?text=登记证",description:"车辆登记证"}]}]}]},{id:"series2",name:"RAV4 荣放",models:[{id:"model3",name:"2.0L CVT豪华版",guidePrice:18e4,vehicles:[{id:"v4",vin:"LVGBE40K8GP123459",licensePlate:"粤B12348",mileage:25e3,color:"蓝色",inspectionPhotos:[{id:"ip13",url:"https://via.placeholder.com/300x200?text=前脸",description:"前脸照片"},{id:"ip14",url:"https://via.placeholder.com/300x200?text=侧面",description:"侧面照片"},{id:"ip15",url:"https://via.placeholder.com/300x200?text=后部",description:"后部照片"},{id:"ip16",url:"https://via.placeholder.com/300x200?text=内饰",description:"内饰照片"}],documentPhotos:[{id:"dp10",url:"https://via.placeholder.com/300x200?text=行驶证正面",description:"行驶证正面"},{id:"dp11",url:"https://via.placeholder.com/300x200?text=行驶证背面",description:"行驶证背面"},{id:"dp12",url:"https://via.placeholder.com/300x200?text=登记证",description:"车辆登记证"}]}]}]}]},{id:"brand2",name:"Honda 本田",logo:"https://via.placeholder.com/60x40?text=HONDA",series:[{id:"series3",name:"Accord 雅阁",models:[{id:"model4",name:"1.5T 豪华版",guidePrice:19e4,vehicles:[{id:"v5",vin:"LVHFB40K8HP654321",licensePlate:"粤B12349",mileage:35e3,color:"银色",inspectionPhotos:[{id:"ip17",url:"https://via.placeholder.com/300x200?text=前脸",description:"前脸照片"},{id:"ip18",url:"https://via.placeholder.com/300x200?text=侧面",description:"侧面照片"},{id:"ip19",url:"https://via.placeholder.com/300x200?text=后部",description:"后部照片"},{id:"ip20",url:"https://via.placeholder.com/300x200?text=内饰",description:"内饰照片"}],documentPhotos:[{id:"dp13",url:"https://via.placeholder.com/300x200?text=行驶证正面",description:"行驶证正面"},{id:"dp14",url:"https://via.placeholder.com/300x200?text=行驶证背面",description:"行驶证背面"},{id:"dp15",url:"https://via.placeholder.com/300x200?text=登记证",description:"车辆登记证"}]}]}]},{id:"series4",name:"CR-V",models:[{id:"model5",name:"1.5T 两驱都市版",guidePrice:17e4,vehicles:[{id:"v6",vin:"LVHFB40K8HP654322",licensePlate:"粤B12350",mileage:4e4,color:"白色",inspectionPhotos:[{id:"ip21",url:"https://via.placeholder.com/300x200?text=前脸",description:"前脸照片"},{id:"ip22",url:"https://via.placeholder.com/300x200?text=侧面",description:"侧面照片"},{id:"ip23",url:"https://via.placeholder.com/300x200?text=后部",description:"后部照片"},{id:"ip24",url:"https://via.placeholder.com/300x200?text=内饰",description:"内饰照片"}],documentPhotos:[{id:"dp16",url:"https://via.placeholder.com/300x200?text=行驶证正面",description:"行驶证正面"},{id:"dp17",url:"https://via.placeholder.com/300x200?text=行驶证背面",description:"行驶证背面"},{id:"dp18",url:"https://via.placeholder.com/300x200?text=登记证",description:"车辆登记证"}]}]}]}]}]})}catch{J.error("获取车辆信息失败")}finally{x(!1)}})()},[t]);const j=i=>{C(a=>({...a,[i]:!a[i]}))},S=async i=>{try{console.log("提交核价结果:",i),J.success("核价结果提交成功"),e("/task-center/price-check")}catch{J.error("提交失败，请重试")}},y=(i,a,o,l)=>{var G,z,B,E,A,T,M,q,U,ee,te,ie,ne,ae,oe;const c=n==null?void 0:n.brands.find(D=>D.id===i);if(!c)return;const p=c.series.find(D=>D.id===a);if(!p)return;const u=p.models.find(D=>D.id===o);if(!u)return;const h=typeof l=="string"?parseFloat(l):l;if(h&&isNaN(h))return;console.log("numericValue",h);const m=h?Math.floor(h/u.vehicles.length):"",_=s.getFieldsValue(),K={..._,brands:{..._.brands,[i]:{...(G=_.brands)==null?void 0:G[i],series:{...(B=(z=_.brands)==null?void 0:z[i])==null?void 0:B.series,[a]:{...(T=(A=(E=_.brands)==null?void 0:E[i])==null?void 0:A.series)==null?void 0:T[a],models:{...(ee=(U=(q=(M=_.brands)==null?void 0:M[i])==null?void 0:q.series)==null?void 0:U[a])==null?void 0:ee.models,[o]:{...(oe=(ae=(ne=(ie=(te=_.brands)==null?void 0:te[i])==null?void 0:ie.series)==null?void 0:ne[a])==null?void 0:ae.models)==null?void 0:oe[o],totalPrice:h,vehicles:{}}}}}}}};u.vehicles.forEach(D=>{K.brands[i].series[a].models[o].vehicles[D.id]={actualPrice:m}}),s.setFieldsValue(K)},I=i=>{const a=v[i.id]||!1,o=i.inspectionPhotos.length,l=i.documentPhotos.length;return r.jsxs("div",{className:O.vehiclePhotos,children:[r.jsxs("div",{className:O.photoToggle,onClick:()=>j(i.id),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"#f5f5f5",border:"1px solid #d9d9d9",borderRadius:"6px",cursor:"pointer",marginBottom:a?"12px":"0"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[r.jsx("span",{style:{fontWeight:500},children:"车辆照片"}),r.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["验车照片(",o,"张) | 质损照片(",l,"张)"]})]}),a?r.jsx(pt,{}):r.jsx(ct,{})]}),a&&r.jsxs(fe,{size:"small",children:[r.jsx(he,{tab:`验车照片 (${o})`,children:r.jsx("div",{className:O.photoGrid,children:i.inspectionPhotos.map(c=>r.jsxs("div",{className:O.photoItem,children:[r.jsx(me,{src:c.url,alt:c.description,style:{width:"100%",height:150,objectFit:"cover"}}),r.jsx("div",{className:O.photoDescription,children:r.jsx("span",{children:c.description})})]},c.id))})},"inspection"),r.jsx(he,{tab:`质损照片 (${l})`,children:r.jsx("div",{className:O.photoGrid,children:i.documentPhotos.map(c=>r.jsxs("div",{className:O.photoItem,children:[r.jsx(me,{src:c.url,alt:c.description,style:{width:"100%",height:150,objectFit:"cover"}}),r.jsx("div",{className:O.photoDescription,children:r.jsx("span",{children:c.description})})]},c.id))})},"document")]})]})},d=(i,a,o,l)=>{const c=[{title:"车架号",dataIndex:"vin",key:"vin",width:180,render:p=>r.jsx("span",{style:{fontFamily:"monospace"},children:p})},{title:"指导价",key:"guidePrice",width:120,render:()=>{var u,h;const p=(h=(u=n==null?void 0:n.brands.find(m=>m.id===a))==null?void 0:u.series.find(m=>m.id===o))==null?void 0:h.models.find(m=>m.id===l);return p?`¥${p.guidePrice.toLocaleString()}`:"-"}},{title:"预授信",key:"preCredit",width:120,render:()=>{var u,h;const p=(h=(u=n==null?void 0:n.brands.find(m=>m.id===a))==null?void 0:u.series.find(m=>m.id===o))==null?void 0:h.models.find(m=>m.id===l);return p?`¥${Math.floor(p.guidePrice*.8).toLocaleString()}`:"-"}},{title:"里程数",dataIndex:"mileage",key:"mileage",width:100,render:p=>`${p.toLocaleString()}公里`},{title:"颜色",dataIndex:"color",key:"color",width:80},{title:"实际价格",key:"actualPrice",width:200,render:()=>r.jsx(H.Item,{name:["brands",a,"series",o,"models",l,"vehicles",i.id,"actualPrice"],rules:[{required:!0,message:"请输入实际价格"}],style:{marginBottom:0},children:r.jsx(pe,{style:{width:"100%"},formatter:p=>`${p}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:p=>p.replace(/\¥\s?|(,*)/g,""),placeholder:"请输入实际价格"})})},{title:"备注",key:"remarks",width:200,render:()=>r.jsx(H.Item,{name:["brands",a,"series",o,"models",l,"vehicles",i.id,"remarks"],style:{marginBottom:0},children:r.jsx(ce.TextArea,{placeholder:"请输入备注",rows:1,style:{width:"100%"}})})}];return r.jsxs("div",{className:O.vehicleCard,children:[r.jsx(ze,{columns:c,dataSource:[i],pagination:!1,size:"small",bordered:!0,rowKey:"id",style:{marginBottom:16}}),I(i)]},i.id)},b=(i,a,o)=>r.jsxs("div",{className:O.modelSection,children:[r.jsxs("div",{className:O.modelHeader,children:[r.jsx("h4",{children:i.name}),r.jsx("div",{className:O.modelPrice,children:r.jsx(H.Item,{name:["brands",a,"series",o,"models",i.id,"totalPrice"],label:"总核价",style:{marginBottom:0},children:r.jsx(pe,{style:{width:200},formatter:l=>`${l}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:l=>l.replace(/\¥\s?|(,*)/g,""),onChange:l=>y(a,o,i.id,l),placeholder:"请输入总核价"})})})]}),r.jsx("div",{className:O.vehiclesList,children:i.vehicles.map(l=>d(l,a,o,i.id))})]},i.id),N=(i,a)=>r.jsx(X,{className:O.seriesCard,children:i.models.map((o,l)=>r.jsx($.Fragment,{children:b(o,a,i.id)},o.id))},i.id),w=i=>r.jsx("div",{className:O.brandCard,children:i.series.map((a,o)=>r.jsx($.Fragment,{children:N(a,i.id)},a.id))},i.id),P=()=>{if(!n)return{orderId:t};const i={orderId:t,brands:{}};return n.brands.forEach(a=>{i.brands[a.id]={series:{}},a.series.forEach(o=>{i.brands[a.id].series[o.id]={models:{}},o.models.forEach(l=>{i.brands[a.id].series[o.id].models[l.id]={totalPrice:l.guidePrice*l.vehicles.length,vehicles:{}},l.vehicles.forEach(c=>{i.brands[a.id].series[o.id].models[l.id].vehicles[c.id]={actualPrice:Math.floor(l.guidePrice*.9),remarks:""}})})})}),i};return r.jsx("div",{className:O.priceCheckDetail,children:r.jsx(X,{children:r.jsxs(H,{form:s,layout:"inline",onFinish:S,initialValues:P(),children:[r.jsx(H.Item,{name:"orderId",label:"订单编号",rules:[{required:!0}],children:r.jsx(ce,{disabled:!0})}),r.jsx(De,{span:24,children:r.jsx(X,{title:"基本信息",loading:f,size:"small",style:{marginBottom:24},children:n&&r.jsxs(W,{bordered:!0,size:"small",children:[r.jsx(W.Item,{label:"品牌",children:n.year}),r.jsx(W.Item,{label:"车系",children:n.status}),r.jsxs(W.Item,{label:"车型",children:[n.brands.length,"个品牌"]})]})})}),n==null?void 0:n.brands.map((i,a)=>r.jsx($.Fragment,{children:w(i)},i.id)),r.jsx(H.Item,{style:{marginTop:32,textAlign:"center"},children:r.jsxs(He,{size:"large",children:[r.jsx(de,{onClick:()=>e(-1),children:"返回"}),r.jsx(de,{type:"primary",htmlType:"submit",size:"large",children:"提交核价"})]})})]})})})};export{Bt as default};
