import{r as c,I as j,u as w,j as e,R as b,B as d}from"./index-BVAS8uCo.js";import{y}from"./index-CDp1POuM.js";import{F as r}from"./index-DBkfi3mz.js";import{C as I}from"./index-BBvuyRUA.js";import{I as i}from"./index-BpOE9vUG.js";import{M as P}from"./index-B-u7i6R4.js";import{s as l}from"./index-uqdkvZpm.js";import"./EyeOutlined-6VNoh7_U.js";import"./Skeleton-cdMzRux_.js";var v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};function m(){return m=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},m.apply(this,arguments)}const C=(a,s)=>c.createElement(j,m({},a,{ref:s,icon:v})),M=c.forwardRef(C),_="_container_p4x53_1",q="_loginCard_p4x53_9",h={container:_,loginCard:q};function F(a){return y.post("/auth/login",a).then(s=>s.data)}const N=()=>{const[a,s]=c.useState(!1),[n,o]=c.useState(!1),[u]=r.useForm(),p=w(),g=async t=>{try{s(!0),F({username:t.phone,password:t.password}),console.log("登录信息:",t),l.success("登录成功"),o(!0)}catch{l.error("登录失败")}finally{s(!1)}},f=async t=>{try{if(t.newPassword!==t.confirmPassword){l.error("两次输入的密码不一致");return}console.log("修改密码:",t),l.success("密码修改成功"),o(!1),p("/orderManage")}catch{l.error("密码修改失败")}};return e.jsxs("div",{className:h.container,children:[e.jsx(I,{className:h.loginCard,title:"用户登录",children:e.jsxs(r,{name:"login",onFinish:g,autoComplete:"off",size:"large",children:[e.jsx(r.Item,{name:"phone",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],children:e.jsx(i,{prefix:e.jsx(b,{}),placeholder:"请输入手机号",maxLength:11})}),e.jsx(r.Item,{name:"password",rules:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度不能小于6位"}],children:e.jsx(i.Password,{prefix:e.jsx(M,{}),placeholder:"请输入密码"})}),e.jsx(r.Item,{children:e.jsx(d,{type:"primary",htmlType:"submit",block:!0,loading:a,children:"登录"})})]})}),e.jsx(P,{title:"修改密码",open:n,onCancel:()=>o(!1),footer:null,maskClosable:!1,closable:!1,children:e.jsxs(r,{form:u,onFinish:f,layout:"vertical",children:[e.jsx(r.Item,{name:"oldPassword",label:"原密码",rules:[{required:!0,message:"请输入原密码"},{min:6,message:"密码长度不能小于6位"}],children:e.jsx(i.Password,{placeholder:"请输入原密码"})}),e.jsx(r.Item,{name:"newPassword",label:"新密码",rules:[{required:!0,message:"请输入新密码"},{min:6,message:"密码长度不能小于6位"}],children:e.jsx(i.Password,{placeholder:"请输入新密码"})}),e.jsx(r.Item,{name:"confirmPassword",label:"确认新密码",rules:[{required:!0,message:"请确认新密码"},{min:6,message:"密码长度不能小于6位"}],children:e.jsx(i.Password,{placeholder:"请再次输入新密码"})}),e.jsx(r.Item,{children:e.jsx(d,{type:"primary",htmlType:"submit",block:!0,children:"确认修改"})})]})})]})};export{N as default};
