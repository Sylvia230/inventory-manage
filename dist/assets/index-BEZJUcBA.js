import{r,F as l,j as e,C as N,R as u,a as g,I as v,S as p,B as i,s as o,M as F}from"./index-DMKvYnLr.js";import{s as b}from"./index.module-CBa0FrbO.js";import{G as y,R as M}from"./merchant-Ch2NxWn9.js";import{F as R}from"./Table-34TOMWnZ.js";import"./Pagination-D83B2W2M.js";import"./index-CIhK1E4t.js";const J=()=>{const[n,s]=r.useState(!1),[c]=l.useForm(),[k,A]=r.useState(1),[f,B]=r.useState(10),[L,P]=r.useState(0),[j,d]=r.useState([{id:"1",name:"测试企业1",creditCode:"91110105MA12345678",legalPerson:"张三",legalPersonId:"110101199001011234",legalSignature:"张三",companySignature:"李四",contactPerson:"王五",businessAddress:"北京市朝阳区xxx街道",creditLevel:"A",creditLimit:1e6,status:"黑名单"}]),S=t=>{F.confirm({title:"确认移除黑名单",content:`确定要将商家"${t.vendorName}"从黑名单中移除吗？`,okText:"确认",cancelText:"取消",onOk:async()=>{try{s(!0),await M({id:t.id}),m(1,10),o.success("已从黑名单中移除")}catch{o.error("操作失败")}finally{s(!1)}}})},m=async(t=k,a=f)=>{s(!0);try{const x=await y({page:t,pageSize:a});console.log("黑名单列表",x),d(x||[])}catch(h){console.error("获取商家列表失败:",h),o.error("获取数据失败")}finally{s(!1)}};r.useEffect(()=>{m(1,10)},[]);const C=async t=>{try{s(!0),console.log("搜索条件：",t);const a=await y(t);console.log("黑名单列表",a),d(a||[])}catch{o.error("搜索失败")}finally{s(!1)}},w=()=>{c.resetFields()},I=[{title:"商家名称",dataIndex:"vendorName",key:"vendorName"},{title:"统一社会信用代码",width:160,dataIndex:"socialCreditCode",key:"socialCreditCode"},{title:"法人名称",dataIndex:"legalName",key:"legalName"},{title:"法人身份证",width:160,dataIndex:"legalCode",key:"legalCode"},{title:"签章人",width:120,dataIndex:"signerName",key:"signerName"},{title:"联系人手机号",width:120,dataIndex:"contactMobile",key:"contactMobile"},{title:"拉黑原因",dataIndex:"reason",key:"reason"},{title:"状态",dataIndex:"statusDesc",key:"statusDesc"},{title:"操作",key:"action",fixed:"right",render:(t,a)=>e.jsx(p,{size:"middle",children:e.jsx(i,{type:"link",onClick:()=>S(a),loading:n,children:"移除黑名单"})})}];return e.jsxs("div",{children:[e.jsx(N,{className:"mb-16",children:e.jsxs(l,{form:c,onFinish:C,layout:"inline",children:[e.jsx(u,{gutter:48,children:e.jsx(g,{span:48,children:e.jsx(l.Item,{name:"vendorName",label:"商家名称",children:e.jsx(v,{placeholder:"请输入商家名称",allowClear:!0})})})}),e.jsx(u,{children:e.jsx(g,{span:24,style:{textAlign:"right"},children:e.jsxs(p,{children:[e.jsx(i,{onClick:w,children:"重置"}),e.jsx(i,{type:"primary",htmlType:"submit",loading:n,children:"查询"})]})})})]})}),e.jsx("div",{className:b.container,children:e.jsx(R,{columns:I,dataSource:j,rowKey:"id",loading:n,pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 条`},scroll:{x:1500}})})]})};export{J as default};
