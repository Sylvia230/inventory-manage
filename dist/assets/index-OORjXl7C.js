import{r as t,am as S,ap as V,F as d,j as e,M as w,I as N,al as O,S as G,B as I,s as j}from"./index-B6A06c6A.js";import{S as b}from"./index-xszfO04H.js";import{T as f}from"./index-aaRB4Zn0.js";import{R as B}from"./SearchOutlined-Bb0vlOc9.js";import{F as M}from"./Table-BEusMSwL.js";function g(){return g=Object.assign?Object.assign.bind():function(i){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[l]=n[l])}return i},g.apply(this,arguments)}const F=(i,s)=>t.createElement(S,g({},i,{ref:s,icon:V})),q=t.forwardRef(F),{Option:v}=b,E=[{label:"奥迪",value:"audi"},{label:"宝马",value:"bmw"},{label:"奔驰",value:"benz"},{label:"大众",value:"volkswagen"},{label:"丰田",value:"toyota"},{label:"本田",value:"honda"}],C=[{label:"轿车",value:"sedan"},{label:"SUV",value:"suv"},{label:"MPV",value:"mpv"},{label:"跑车",value:"sports"},{label:"皮卡",value:"pickup"}],R=({visible:i,onCancel:s,onOk:n,loading:l=!1})=>{const[c]=d.useForm(),[u,m]=t.useState(!1),[r,o]=t.useState(""),h=async()=>{try{const a=await c.validateFields();n(a)}catch{}},P=()=>{c.resetFields(),m(!1),o(""),s()},y=a=>{console.log("...value",a),m(a==="new")},p=()=>{r&&(c.setFieldsValue({brand:r}),m(!1),o(""))};return e.jsx(w,{title:"新增车型",open:i,onOk:h,onCancel:P,confirmLoading:l,destroyOnClose:!0,width:600,children:e.jsxs(d,{form:c,layout:"vertical",requiredMark:!1,children:[e.jsx(d.Item,{name:"brand",label:"品牌",rules:[{required:!0,message:"请选择或输入品牌"}],children:u?e.jsx(N,{placeholder:"请输入品牌名称",value:r,onChange:a=>o(a.target.value),onBlur:p,onPressEnter:p,autoFocus:!0}):e.jsx(b,{placeholder:"请选择或输入品牌",onChange:y,dropdownRender:a=>e.jsxs(e.Fragment,{children:[a,e.jsx(b.Option,{value:"new",style:{borderTop:"1px solid #e8e8e8"},children:"+ 新增品牌"})]}),children:E.map(a=>e.jsx(v,{value:a.value,children:a.label},a.value))})}),e.jsx(d.Item,{name:"model",label:"车型",rules:[{required:!0,message:"请选择车型"}],children:e.jsx(b,{placeholder:"请选择车型",children:C.map(a=>e.jsx(v,{value:a.value,children:a.label},a.value))})}),e.jsx(d.Item,{name:"series",label:"车系",rules:[{required:!0,message:"请输入车系"}],children:e.jsx(N,{placeholder:"请输入车系"})}),e.jsx(d.Item,{name:"specification",label:"车规",rules:[{required:!0,message:"请输入车规"}],children:e.jsx(b,{placeholder:"请选择车规",children:C.map(a=>e.jsx(v,{value:a.value,children:a.label},a.value))})}),e.jsx(d.Item,{name:"maxGuidePrice",label:"最高指导价",rules:[{required:!0,message:"请输入指导价"}],children:e.jsx(f,{style:{width:"100%"},placeholder:"请输入指导价",min:0,precision:2,formatter:a=>`¥ ${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),e.jsx(d.Item,{name:"miniGuidePrice",label:"最低指导价",rules:[{required:!0,message:"请输入指导价"}],children:e.jsx(f,{style:{width:"100%"},placeholder:"请输入指导价",min:0,precision:2,formatter:a=>`¥ ${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})})},T=({visible:i,onCancel:s,onOk:n,loading:l,initialValues:c})=>{const[u]=d.useForm(),m=async()=>{try{const r=await u.validateFields();n(r)}catch{}};return e.jsx(w,{title:"编辑指导价",open:i,onCancel:s,onOk:m,confirmLoading:l,destroyOnClose:!0,children:e.jsxs(d,{form:u,layout:"vertical",initialValues:c,children:[e.jsx(d.Item,{name:"miniGuidePrice",label:"最低指导价",rules:[{required:!0,message:"请输入最低指导价"},{type:"number",min:0,message:"价格必须大于0"}],children:e.jsx(f,{style:{width:"100%"},formatter:r=>`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r.replace(/\¥\s?|(,*)/g,""),placeholder:"请输入最低指导价"})}),e.jsx(d.Item,{name:"maxGuidePrice",label:"最高指导价",rules:[{required:!0,message:"请输入最高指导价"},{type:"number",min:0,message:"价格必须大于0"},({getFieldValue:r})=>({validator(o,h){return!h||!r("miniGuidePrice")||h>=r("miniGuidePrice")?Promise.resolve():Promise.reject(new Error("最高指导价必须大于最低指导价"))}})],children:e.jsx(f,{style:{width:"100%"},formatter:r=>`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r.replace(/\¥\s?|(,*)/g,""),placeholder:"请输入最高指导价"})})]})})},$=()=>{const[i,s]=t.useState(!1),[n,l]=t.useState([]),[c,u]=t.useState(!1),[m,r]=t.useState(!1),[o,h]=t.useState(null);t.useState(()=>{l([{admittanceCarId:"4080",seriesId:"594",seriesName:"埃尔法",brandId:"41",brandName:"丰田",standard:2,standardName:["中规"],miniGuidePrice:9,maxGuidePrice:16,status:1},{admittanceCarId:"4079",seriesId:"10149",seriesName:"金刚炮",brandId:"25",brandName:"长城",standard:1,standardName:["国产"],miniGuidePrice:0,maxGuidePrice:0,status:0},{admittanceCarId:"4078",seriesId:"5687",seriesName:"长安欧尚科尚",brandId:"24",brandName:"长安欧尚",standard:2,standardName:["中规"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4077",seriesId:"9936",seriesName:"猎人",brandId:"410",brandName:"瓦滋",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:"0",maxGuidePrice:"0",status:1},{admittanceCarId:"4076",seriesId:"2329",seriesName:"福特F150(猛禽)",brandId:"44",brandName:"福特",standard:92,standardName:["美规","加规","中东","墨西哥版"],miniGuidePrice:"80",maxGuidePrice:"111.2",status:1},{admittanceCarId:"4075",seriesId:"9922",seriesName:"Chiron赤龙",brandId:"21",brandName:"布加迪",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4074",seriesId:"2477",seriesName:"巴博斯-迈巴赫S级",brandId:"5",brandName:"博速",standard:32,standardName:["欧规"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4073",seriesId:"2328",seriesName:"奥迪Q5",brandId:"4",brandName:"奥迪",standard:108,standardName:["美规","加规","欧规","墨西哥版"],miniGuidePrice:"12",maxGuidePrice:"24.22",status:1},{admittanceCarId:"4071",seriesId:"2476",seriesName:"AC X5",brandId:"149",brandName:"AC Schnitzer",standard:4,standardName:["美规"],miniGuidePrice:"9",maxGuidePrice:"4",status:1},{admittanceCarId:"4070",seriesId:"9921",seriesName:"博速 G级4x4",brandId:"5",brandName:"博速",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:"10.8",maxGuidePrice:"11.7",status:1}])});const P=async a=>{try{s(!0),j.success("新增车型成功"),u(!1)}catch{j.error("新增车型失败")}finally{s(!1)}},y=async a=>{try{s(!0),j.success("编辑指导价成功"),r(!1)}catch{j.error("编辑指导价失败")}finally{s(!1)}},p=[{title:"品牌",dataIndex:"brandName",key:"brandName"},{title:"车系",dataIndex:"seriesName",key:"seriesName"},{title:"车型",dataIndex:"model",key:"model"},{title:"车规",dataIndex:"standardName",key:"standardName",render:(a,x)=>(console.log("..value",a),(a==null?void 0:a.length)&&a.map(k=>e.jsx("div",{children:k})))},{title:"最高指导价",dataIndex:"maxGuidePrice",key:"maxGuidePrice"},{title:"最低指导价",dataIndex:"miniGuidePrice",key:"miniGuidePrice"},{title:"状态",dataIndex:"status",key:"status",render:a=>e.jsx("span",{style:{color:a==="active"?"#52c41a":"#ff4d4f"},children:a==="active"?"已启用":"已禁用"})},{title:"操作",key:"action",render:(a,x)=>e.jsxs(G,{size:"middle",children:[e.jsx(I,{type:"link",onClick:()=>{h(x),r(!0)},children:"编辑指导价"}),e.jsx(I,{type:"link",danger:!0,children:x.status==="active"?"禁用":"启用"})]})}];return e.jsxs("div",{children:[e.jsxs(O,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsxs(G,{children:[e.jsx(N,{placeholder:"请输入品牌/车系/车型",prefix:e.jsx(B,{}),style:{width:300}}),e.jsx(I,{type:"primary",children:"搜索"})]}),e.jsx(I,{type:"primary",icon:e.jsx(q,{}),onClick:()=>u(!0),children:"新增车型"})]}),e.jsx(M,{columns:p,dataSource:n,loading:i,rowKey:"id",pagination:{total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:a=>`共 ${a} 条`}})]}),e.jsx(R,{visible:c,onCancel:()=>u(!1),onOk:P,loading:i}),e.jsx(T,{visible:m,onCancel:()=>{r(!1),h(null)},onOk:y,loading:i,initialValues:o?{miniGuidePrice:o.miniGuidePrice,maxGuidePrice:o.maxGuidePrice}:void 0})]})},Q=()=>e.jsx(O,{children:e.jsx($,{})});export{Q as default};
