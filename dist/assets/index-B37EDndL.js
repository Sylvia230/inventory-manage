import{F as l,r as t,j as e,R as I,a as s,I as n,S as _,B as o,M as k,s as N}from"./index-CMZTZRIn.js";import{S}from"./index-CYJ1echB.js";import{D as H}from"./index-nlJJkfBw.js";import{R as q}from"./SearchOutlined-D2-z65ZP.js";import{R as z}from"./ReloadOutlined-D9mwfiSd.js";import{R as E}from"./PlusOutlined-7uYA3-eC.js";import{F as P}from"./Table-Cg2wz00u.js";import{C as V}from"./index-BJ_5mdmU.js";import"./Pagination-BY7MwDV5.js";const G="_container_e2zo2_1",L={container:G},{RangePicker:J}=H,ne=()=>{const[x]=l.useForm(),[r]=l.useForm(),[b,K]=t.useState(!1),[f,d]=t.useState(!1),[y,c]=t.useState(!1),[Q,i]=t.useState(null),[w,m]=t.useState(!1),[h,p]=t.useState(null),B=[{label:"身份证",value:"ID_CARD"},{label:"护照",value:"PASSPORT"},{label:"军官证",value:"MILITARY_ID"},{label:"港澳通行证",value:"HONG_KONG_MACAO"},{label:"台湾通行证",value:"TAIWAN"}],C=[{value:"ICBC",label:"中国工商银行",children:[{value:"ICBC_SH_001",label:"上海分行"},{value:"ICBC_SH_002",label:"浦东支行"},{value:"ICBC_SH_003",label:"徐汇支行"}]},{value:"ABC",label:"中国农业银行",children:[{value:"ABC_SH_001",label:"上海分行"},{value:"ABC_SH_002",label:"浦东支行"},{value:"ABC_SH_003",label:"徐汇支行"}]},{value:"BOC",label:"中国银行",children:[{value:"BOC_SH_001",label:"上海分行"},{value:"BOC_SH_002",label:"浦东支行"},{value:"BOC_SH_003",label:"徐汇支行"}]}],g=[{title:"银行账户户名",dataIndex:"accountName",width:150},{title:"卡号",dataIndex:"cardNumber",width:180,render:a=>{const u=a.slice(-4);return`${"*".repeat(a.length-4)}${u}`}},{title:"开户行",dataIndex:"bankName",width:150},{title:"商户id",dataIndex:"merchantId",width:150},{title:"绑定手机号",dataIndex:"phone",width:150,render:a=>a.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},{title:"证件号",dataIndex:"idNumber",width:180,render:a=>a.replace(/(\d{4})\d{10}(\d{4})/,"$1**********$2")},{title:"归属方",dataIndex:"owner",width:120},{title:"创建时间",dataIndex:"createTime",width:180},{title:"操作",key:"action",fixed:"right",width:180,render:(a,u)=>e.jsxs(_,{size:"middle",children:[e.jsx(o,{type:"link",onClick:()=>A(u),children:"编辑"}),e.jsx(o,{type:"link",danger:!0,onClick:()=>F(u),children:"删除"})]})}],[j]=t.useState([{key:"1",accountName:"张三",cardNumber:"6222021234567890123",bankName:"中国工商银行",merchantId:"M20240301001",phone:"13800138000",idNumber:"310101199001011234",owner:"个人",createTime:"2024-03-01 10:00:00",idType:"ID_CARD",bankBranch:["ICBC","ICBC_SH_001"]},{key:"2",accountName:"李四",cardNumber:"6228481234567890123",bankName:"中国农业银行",merchantId:"M20240301002",phone:"13900139000",idNumber:"310101199002022345",owner:"企业",createTime:"2024-03-01 11:00:00",idType:"ID_CARD",bankBranch:["ABC","ABC_SH_001"]},{key:"3",accountName:"王五",cardNumber:"6225881234567890123",bankName:"中国银行",merchantId:"M20240301003",phone:"13700137000",idNumber:"310101199003033456",owner:"个人",createTime:"2024-03-01 12:00:00",idType:"ID_CARD",bankBranch:["BOC","BOC_SH_001"]}]),T=a=>{console.log("搜索条件:",a)},v=()=>{x.resetFields()},R=()=>{c(!1),i(null),d(!0),r.resetFields()},A=a=>{c(!0),i(a),d(!0),r.setFieldsValue({accountName:a.accountName,bankBranch:a.bankBranch,cardNumber:a.cardNumber,phone:a.phone,idType:a.idType,idNumber:a.idNumber})},D=()=>{d(!1),c(!1),i(null),r.resetFields()},$=async()=>{try{const a=await r.validateFields();console.log("保存银行卡:",a),d(!1),c(!1),i(null),r.resetFields()}catch(a){console.error("表单验证失败:",a)}},F=a=>{p(a),m(!0)},M=async()=>{try{console.log("删除银行卡:",h),N.success("删除成功"),m(!1),p(null)}catch(a){console.error("删除失败:",a),N.error("删除失败")}},O=()=>{m(!1),p(null)};return e.jsxs("div",{className:L.container,children:[e.jsxs(l,{form:x,onFinish:T,layout:"inline",children:[e.jsxs(I,{gutter:24,style:{width:"100%"},children:[e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"cardNumber",label:"银行卡账号",children:e.jsx(n,{placeholder:"请输入银行卡账号",allowClear:!0})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"accountName",label:"户名",children:e.jsx(n,{placeholder:"请输入户名",allowClear:!0})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"bankName",label:"银行",children:e.jsx(S,{placeholder:"请选择银行",options:C,allowClear:!0})})})]}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"createTime",label:"创建时间",children:e.jsx(J,{style:{width:"100%"}})})}),e.jsx(I,{gutter:24,style:{width:"100%"},children:e.jsx(s,{span:6,children:e.jsxs(_,{children:[e.jsx(o,{icon:e.jsx(q,{}),type:"primary",htmlType:"submit",loading:b,children:"查询"}),e.jsx(o,{icon:e.jsx(z,{}),onClick:v,children:"重置"}),e.jsx(o,{type:"primary",icon:e.jsx(E,{}),onClick:R,children:"新增银行卡"})]})})})]}),e.jsx(P,{columns:g,dataSource:j,loading:b,pagination:{total:j.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:a=>`共 ${a} 条`},scroll:{x:1300}}),e.jsx(k,{title:y?"编辑银行卡":"新增银行卡",open:f,onOk:$,onCancel:D,width:600,children:e.jsxs(l,{form:r,layout:"vertical",requiredMark:!1,children:[e.jsx(l.Item,{name:"accountName",label:"户名",rules:[{required:!0,message:"请输入户名"}],children:e.jsx(n,{placeholder:"请输入户名"})}),e.jsx(l.Item,{name:"bankBranch",label:"开户支行",rules:[{required:!0,message:"请选择开户支行"}],children:e.jsx(V,{options:C,placeholder:"请选择开户支行",expandTrigger:"hover"})}),e.jsx(l.Item,{name:"cardNumber",label:"账户",rules:[{required:!0,message:"请输入账户"},{pattern:/^\d{16,19}$/,message:"请输入16-19位数字"}],children:e.jsx(n,{placeholder:"请输入账户"})}),e.jsx(l.Item,{name:"phone",label:"手机号",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],children:e.jsx(n,{placeholder:"请输入手机号"})}),e.jsx(l.Item,{name:"idType",label:"证件类型",children:e.jsx(S,{placeholder:"请选择证件类型",options:B,allowClear:!0})}),e.jsx(l.Item,{name:"idNumber",label:"证件编号",rules:[{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的证件编号"}],children:e.jsx(n,{placeholder:"请输入证件编号"})})]})}),e.jsxs(k,{title:"删除确认",open:w,onOk:M,onCancel:O,okText:"确认",cancelText:"取消",okButtonProps:{danger:!0},children:[e.jsx("p",{children:"确定要删除该银行卡吗？"}),h&&e.jsxs("p",{style:{color:"#666",fontSize:"14px"},children:["卡号：",h.cardNumber.replace(/(\d{4})\d+(\d{4})/,"$1****$2")]})]})]})};export{ne as default};
