import{F as s,r as c,j as e,M as C,I as v,C as w,S as G,B as I,s as j}from"./index-D2rM6ovj.js";import{S as b}from"./index-Bqt44OL4.js";import{T as f}from"./index-VfPI4BCv.js";import{R as S}from"./SearchOutlined-B9eb8B1y.js";import{R as O}from"./PlusOutlined-LRqCJWqy.js";import{F as V}from"./Table-B7m-L3lW.js";import"./styleChecker-CcZ-Kr6E.js";const{Option:N}=b,B=[{label:"奥迪",value:"audi"},{label:"宝马",value:"bmw"},{label:"奔驰",value:"benz"},{label:"大众",value:"volkswagen"},{label:"丰田",value:"toyota"},{label:"本田",value:"honda"}],g=[{label:"轿车",value:"sedan"},{label:"SUV",value:"suv"},{label:"MPV",value:"mpv"},{label:"跑车",value:"sports"},{label:"皮卡",value:"pickup"}],M=({visible:u,onCancel:i,onOk:o,loading:h=!1})=>{const[d]=s.useForm(),[t,n]=c.useState(!1),[r,l]=c.useState(""),m=async()=>{try{const a=await d.validateFields();o(a)}catch{}},P=()=>{d.resetFields(),n(!1),l(""),i()},y=a=>{console.log("...value",a),n(a==="new")},p=()=>{r&&(d.setFieldsValue({brand:r}),n(!1),l(""))};return e.jsx(C,{title:"新增车型",open:u,onOk:m,onCancel:P,confirmLoading:h,destroyOnClose:!0,width:600,children:e.jsxs(s,{form:d,layout:"vertical",requiredMark:!1,children:[e.jsx(s.Item,{name:"brand",label:"品牌",rules:[{required:!0,message:"请选择或输入品牌"}],children:t?e.jsx(v,{placeholder:"请输入品牌名称",value:r,onChange:a=>l(a.target.value),onBlur:p,onPressEnter:p,autoFocus:!0}):e.jsx(b,{placeholder:"请选择或输入品牌",onChange:y,dropdownRender:a=>e.jsxs(e.Fragment,{children:[a,e.jsx(b.Option,{value:"new",style:{borderTop:"1px solid #e8e8e8"},children:"+ 新增品牌"})]}),children:B.map(a=>e.jsx(N,{value:a.value,children:a.label},a.value))})}),e.jsx(s.Item,{name:"model",label:"车型",rules:[{required:!0,message:"请选择车型"}],children:e.jsx(b,{placeholder:"请选择车型",children:g.map(a=>e.jsx(N,{value:a.value,children:a.label},a.value))})}),e.jsx(s.Item,{name:"series",label:"车系",rules:[{required:!0,message:"请输入车系"}],children:e.jsx(v,{placeholder:"请输入车系"})}),e.jsx(s.Item,{name:"specification",label:"车规",rules:[{required:!0,message:"请输入车规"}],children:e.jsx(b,{placeholder:"请选择车规",children:g.map(a=>e.jsx(N,{value:a.value,children:a.label},a.value))})}),e.jsx(s.Item,{name:"maxGuidePrice",label:"最高指导价",rules:[{required:!0,message:"请输入指导价"}],children:e.jsx(f,{style:{width:"100%"},placeholder:"请输入指导价",min:0,precision:2,formatter:a=>`¥ ${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),e.jsx(s.Item,{name:"miniGuidePrice",label:"最低指导价",rules:[{required:!0,message:"请输入指导价"}],children:e.jsx(f,{style:{width:"100%"},placeholder:"请输入指导价",min:0,precision:2,formatter:a=>`¥ ${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})})},F=({visible:u,onCancel:i,onOk:o,loading:h,initialValues:d})=>{const[t]=s.useForm(),n=async()=>{try{const r=await t.validateFields();o(r)}catch{}};return e.jsx(C,{title:"编辑指导价",open:u,onCancel:i,onOk:n,confirmLoading:h,destroyOnClose:!0,children:e.jsxs(s,{form:t,layout:"vertical",initialValues:d,children:[e.jsx(s.Item,{name:"miniGuidePrice",label:"最低指导价",rules:[{required:!0,message:"请输入最低指导价"},{type:"number",min:0,message:"价格必须大于0"}],children:e.jsx(f,{style:{width:"100%"},formatter:r=>`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r.replace(/\¥\s?|(,*)/g,""),placeholder:"请输入最低指导价"})}),e.jsx(s.Item,{name:"maxGuidePrice",label:"最高指导价",rules:[{required:!0,message:"请输入最高指导价"},{type:"number",min:0,message:"价格必须大于0"},({getFieldValue:r})=>({validator(l,m){return!m||!r("miniGuidePrice")||m>=r("miniGuidePrice")?Promise.resolve():Promise.reject(new Error("最高指导价必须大于最低指导价"))}})],children:e.jsx(f,{style:{width:"100%"},formatter:r=>`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r.replace(/\¥\s?|(,*)/g,""),placeholder:"请输入最高指导价"})})]})})},q=()=>{const[u,i]=c.useState(!1),[o,h]=c.useState([]),[d,t]=c.useState(!1),[n,r]=c.useState(!1),[l,m]=c.useState(null);c.useState(()=>{h([{admittanceCarId:"4080",seriesId:"594",seriesName:"埃尔法",brandId:"41",brandName:"丰田",standard:2,standardName:["中规"],miniGuidePrice:9,maxGuidePrice:16,status:1},{admittanceCarId:"4079",seriesId:"10149",seriesName:"金刚炮",brandId:"25",brandName:"长城",standard:1,standardName:["国产"],miniGuidePrice:0,maxGuidePrice:0,status:0},{admittanceCarId:"4078",seriesId:"5687",seriesName:"长安欧尚科尚",brandId:"24",brandName:"长安欧尚",standard:2,standardName:["中规"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4077",seriesId:"9936",seriesName:"猎人",brandId:"410",brandName:"瓦滋",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:"0",maxGuidePrice:"0",status:1},{admittanceCarId:"4076",seriesId:"2329",seriesName:"福特F150(猛禽)",brandId:"44",brandName:"福特",standard:92,standardName:["美规","加规","中东","墨西哥版"],miniGuidePrice:"80",maxGuidePrice:"111.2",status:1},{admittanceCarId:"4075",seriesId:"9922",seriesName:"Chiron赤龙",brandId:"21",brandName:"布加迪",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4074",seriesId:"2477",seriesName:"巴博斯-迈巴赫S级",brandId:"5",brandName:"博速",standard:32,standardName:["欧规"],miniGuidePrice:null,maxGuidePrice:null,status:1},{admittanceCarId:"4073",seriesId:"2328",seriesName:"奥迪Q5",brandId:"4",brandName:"奥迪",standard:108,standardName:["美规","加规","欧规","墨西哥版"],miniGuidePrice:"12",maxGuidePrice:"24.22",status:1},{admittanceCarId:"4071",seriesId:"2476",seriesName:"AC X5",brandId:"149",brandName:"AC Schnitzer",standard:4,standardName:["美规"],miniGuidePrice:"9",maxGuidePrice:"4",status:1},{admittanceCarId:"4070",seriesId:"9921",seriesName:"博速 G级4x4",brandId:"5",brandName:"博速",standard:124,standardName:["美规","加规","中东","欧规","墨西哥版"],miniGuidePrice:"10.8",maxGuidePrice:"11.7",status:1}])});const P=async a=>{try{i(!0),j.success("新增车型成功"),t(!1)}catch{j.error("新增车型失败")}finally{i(!1)}},y=async a=>{try{i(!0),j.success("编辑指导价成功"),r(!1)}catch{j.error("编辑指导价失败")}finally{i(!1)}},p=[{title:"品牌",dataIndex:"brandName",key:"brandName"},{title:"车系",dataIndex:"seriesName",key:"seriesName"},{title:"车型",dataIndex:"model",key:"model"},{title:"车规",dataIndex:"standardName",key:"standardName",render:(a,x)=>(console.log("..value",a),(a==null?void 0:a.length)&&a.map(k=>e.jsx("div",{children:k})))},{title:"最高指导价",dataIndex:"maxGuidePrice",key:"maxGuidePrice"},{title:"最低指导价",dataIndex:"miniGuidePrice",key:"miniGuidePrice"},{title:"状态",dataIndex:"status",key:"status",render:a=>e.jsx("span",{style:{color:a==="active"?"#52c41a":"#ff4d4f"},children:a==="active"?"已启用":"已禁用"})},{title:"操作",key:"action",render:(a,x)=>e.jsxs(G,{size:"middle",children:[e.jsx(I,{type:"link",onClick:()=>{m(x),r(!0)},children:"编辑指导价"}),e.jsx(I,{type:"link",danger:!0,children:x.status==="active"?"禁用":"启用"})]})}];return e.jsxs("div",{children:[e.jsxs(w,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsxs(G,{children:[e.jsx(v,{placeholder:"请输入品牌/车系/车型",prefix:e.jsx(S,{}),style:{width:300}}),e.jsx(I,{type:"primary",children:"搜索"})]}),e.jsx(I,{type:"primary",icon:e.jsx(O,{}),onClick:()=>t(!0),children:"新增车型"})]}),e.jsx(V,{columns:p,dataSource:o,loading:u,rowKey:"id",pagination:{total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:a=>`共 ${a} 条`}})]}),e.jsx(M,{visible:d,onCancel:()=>t(!1),onOk:P,loading:u}),e.jsx(F,{visible:n,onCancel:()=>{r(!1),m(null)},onOk:y,loading:u,initialValues:l?{miniGuidePrice:l.miniGuidePrice,maxGuidePrice:l.maxGuidePrice}:void 0})]})},_=()=>e.jsx(w,{children:e.jsx(q,{})});export{_ as default};
